<!DOCTYPE html>
<html lang="en">
<head>
    <!-- DO NOT EDIT THIS FILE.  It is generated.  See README. -->
    <meta charset="utf-8" />
    <!-- meta name="viewport" content="width=device-width, initial-scale=1" -->
    <title>b2_download_file_by_id</title> 
    <!-- font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css' />
    <!-- jquery -->
    <script language="JavaScript" src="../../scripts/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/jquery.cookie.js" type="text/javascript"></script>
    <!-- bootstrap -->
    <link href="../css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/bootstrap.min.js" type="text/javascript"></script>
    <!-- backblaze -->
    <link href="../css/b2_nav.css" rel="stylesheet" type="text/css"/>    
    <link href="../css/b2_footer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/b2_main.css" rel="stylesheet" type="text/css"/> 
    <link href="../css/b2-cloud-storage-docs.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/b2-cloud-storage-docs.js" type="text/javascript"></script>
    <script language="JavaScript" src="../js/nav.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/main.js" type="text/javascript"></script>
    <!- highlight.js -->
    <link id="highLightLink" href="../css/highlight/xcode.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" type="text/javascript" src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    
<div class="header clearfix">
    <nav class="navbar navbar-default navbar-fixed-top" style="background-color:#fff;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header b2_docs_nav_bar_hdr">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <div id="nav-icon3">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <a class="navbar-brand" href="/index.html">
                    <img src="https://www.backblaze.com/pics/backblaze-logo.gif"
                         width="180" height="31" alt="Backblaze" style="float:left;"></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="../../cloud-backup.html">Personal Backup</a></li>
                    <li><a href="../../business.html">Business Backup</a></li>
                    <li class="active"><a href="../index.html">B2 Cloud Storage</a></li>
                    <li><a href="../../blog/">Blog</a></li>
                    <li><a href="../../help.html">Help</a></li>
                    <li><a href="../../user_signin.htm">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="b2-docs-subnav-bar">
        <div id="bzSubNav">
            <div class="sub-wrapper container">
            <a id="sub-nav-toggle"><img class="nav-caret" src="../../pics/nav-caret-down.png"></a>
            <ul id="sub-nav-items">
                <li><a href="../cloud-storage.html" id="howItWorks"><span>How B2 Works</span></a>
                </li>
                <li><a href="../cloud-storage-providers.html" id="comparison"><span>Comparison</span></a></li>
                <li><a href="../why-b2.html" id="whyB2"><span>Why B2</span></a></li>
                <li><a href="../b2-use-cases.html" id="bzUseCases"><span>Use Cases</span></a></li>
                <li><a href="index.html" id="bzDoc" class="sub-nav-current"><span>Documentation</span></a></li>
            </ul>
            <div class="nav-button-wrapper">
                <a href="../cloud-storage-pricing.html" class="btn btn-default" role="button">Pricing</a>
                <a href="../get-invite.html" class="btn btn-primary" role="button">Get Invite</a>
            </div>
        </div>


</div>
    </div>

    <table class="doc_container">
        <tbody>
        <tr>
            <td class="left_column">
                <div class="left_nav">
                    <p class="left_nav_header">B2 Storage</p>
                    <p class="left_nav_item" id="index"><a href="index.html">Overview</a></p>
                    <p class="left_nav_item" id="buckets"><a href="buckets.html">Buckets</a></p>
                    <p class="left_nav_item" id="files"><a href="files.html">Files</a></p>
                    <p class="left_nav_item" id="file_versions"><a href="file_versions.html">File Versions</a></p>
                    <p class="left_nav_item" id="calling"><a href="calling.html">Calling the API</a></p>
                    <p class="left_nav_item" id="string_encoding"><a href="string_encoding.html">String Encoding</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Quick Start</p>
                    <p class="left_nav_item" id="quick_account"><a href="quick_account.html">Get An Account</a></p>
                    <p class="left_nav_item" id="quick_command_line"><a href="quick_command_line.html">Command-Line Tool</a></p>
                    <p class="left_nav_item" id="quick_bucket"><a href="quick_bucket.html">Make a Bucket</a></p>
                    <p class="left_nav_item" id="quick_upload"><a href="quick_upload.html">Upload a File</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">API Operations</p>
                    <p class="left_nav_item" id="b2_authorize_account"><a href="b2_authorize_account.html">b2_authorize_account</a></p>
                    <p class="left_nav_item" id="b2_create_bucket"><a href="b2_create_bucket.html">b2_create_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_bucket"><a href="b2_delete_bucket.html">b2_delete_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_file_version"><a href="b2_delete_file_version.html">b2_delete_file_version</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_id"><a href="b2_download_file_by_id.html">b2_download_file_by_id</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_name"><a href="b2_download_file_by_name.html">b2_download_file_by_name</a></p>
                    <p class="left_nav_item" id="b2_get_file_info"><a href="b2_get_file_info.html">b2_get_file_info</a></p>
                    <p class="left_nav_item" id="b2_get_upload_url"><a href="b2_get_upload_url.html">b2_get_upload_url</a></p>
                    <p class="left_nav_item" id="b2_hide_file"><a href="b2_hide_file.html">b2_hide_file</a></p>
                    <p class="left_nav_item" id="b2_list_buckets"><a href="b2_list_buckets.html">b2_list_buckets</a></p>
                    <p class="left_nav_item" id="b2_list_file_names"><a href="b2_list_file_names.html">b2_list_file_names</a></p>
                    <p class="left_nav_item" id="b2_list_file_versions"><a href="b2_list_file_versions.html">b2_list_file_versions</a></p>
                    <p class="left_nav_item" id="b2_update_bucket"><a href="b2_update_bucket.html">b2_update_bucket</a></p>
                    <p class="left_nav_item" id="b2_upload_file"><a href="b2_upload_file.html">b2_upload_file</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Source Code Bundles</p>
                    <p class="left_nav_item" id="b2-python-pusher"><a href="b2-python-pusher.html">B2 Python Pusher</a></p>
                    <p class="left_nav_item" id="playground"><a href="playground.html">Swift Playground</a></p>
                </div>
            </td>
            <td class="middle_column">

    
<h1>b2_download_file_by_id</h1>

<p class="doc_intro">
    Downloads one file from B2.
</p>

<p>
    The response contains the following headers, which contain the same
    information they did when the file was uploaded:
</p>

<ul>
    <li>Content-Length</li>
    <li>Content-Type</li>
    <li>X-Bz-File-Id</li>
    <li>X-Bz-File-Name</li>
    <li>X-Bz-Content-Sha1</li>
    <li>X-Bz-Info-*</li>
</ul>

<p>
    HEAD requests are also supported, and work just like a GET, except
    that the body of the response is not included.  All of the same headers,
    including Content-Length are returned.
</p>

<p>
    If the bucket containing the file is set to require authorization,
    then you must supply the bucket's auth token in the Authorzation
    header.
</p>

<p>
    Because errors can happen in network transmission, you should check
    the SHA1 of the data you receive against the SHA1 returned in the
    X-Bz-Content-Sha1 header.
</p>

<h2>Request</h2>

<p>
    The URL to use for downloading is found on the Account page on the B2
    web site, and looks like this, possible with different numbers in the
    host name:
    <code>https://f001.backblaze.com/b2api/v1/b2_download_file_by_id</code>.
</p>

<p>
    As with normal API calls, the request
    information can either be posted as JSON, or put in the URL query
    parameters.  Unlike the other API calls, the response is not JSON, but
    is the contents of the file.
</p>

<h3>Request HTTP Message Body Parameters</h3>

<div class="b2_params">
    <div class="param">
        <p class="param_name">fileId</p>
        <p class="param_required">Required</p>
        <p class="param_description">
            The file ID that was returned from b2_upload_file.  It can also be
            found using b2_list_files or b2_list_file_versions.
        </p>
    </div>
</div>

<h3>Example</h3>

<pre class="code">GET /api/b2_download_file_by_id?fileId=4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104 HTTP/1.1
User-Agent: curl/7.41.0
Host: f001.backblaze.com
Authorization: 1_20100215141633_18d3a718d3a718d3a718d3a7_1d148b2427e9aff1364898aae20246802ec9733d

</pre>

<h3>Return Value</h3>

<p>
    On success, the HTTP return status is 200.  Anything other than 200 is failure and the file will not be downloaded. 
	On failure if possible the server will return the following JSON structure with more information about the error:<br>
	<pre>   { &quot;code&quot;: &quot;codeValue&quot;,<br>     &quot;message&quot;: &quot;messageValue&quot;,<br>     &quot;status&quot;: http_ret_status_int }</pre>
	where the messageValue is a human readable message.
</p>

<h2>Response</h2>

<p>
    The response headers include the Content-Type that was specified when the
    file was uploaded.  They also include the X-Bz-FileName and X-Bz-Content-Sha1
    headers, plus X-Bz-Info-* headers for any custom file info that was
    provided with the upload.  The X-Bz-FileName uses percent-encoding, as if
    it were a URL parameter.
</p>

<h3>Example</h3>

<pre class="code">HTTP/1.1 200 OK
Content-Length: 46
Content-Type: text/plain
X-Bz-File-Id: 4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104
X-Bz-File-Name: typing-test.txt
X-Bz-Content-Sha1: bae5ed658ab3546aee12f23f36392f35dba1ebdd
X-Bz-Info-author: unknown

The quick brown fox jumped over the lazy dog.
</pre>



    
<!-- DO NOT EDIT - this section generated by build-doc.py -->

<h2>Sample Code</h2>
<nav id="example_bar"></nav>
<div id="example_source">
<div id="src_curl" title="cUrl">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="bash">DOWNLOAD_URL=...
FILE_ID=...

curl "$DOWNLOAD_URL/b2api/v1/b2_download_file_by_id?fileId=$FILE_ID"</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>The quick brown fox jumped over the lazy dog.</code></pre>
</div>
<div id="src_java" title="Java">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="java">String downloadUrl = ""; // Provided by authorize account
String fileId = "";  // The file ID of the file you want to download
HttpURLConnection connection = null;
byte downloadedData[] = null;
try {
    URL url = new URL(downloadUrl + "/b2api/v1/b2_download_file_by_id?fileId=" + fileId);
    connection = (HttpURLConnection)url.openConnection();
    connection.setRequestMethod("GET");
    connection.setDoOutput(true);
    downloadedData = myDataInputStreamHandler(connection.getInputStream());
} catch (Exception e) {
    e.printStackTrace();
} finally {
    connection.disconnect();
}</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>The quick brown fox jumped over the lazy dog.</code></pre>
</div>
<div id="src_python" title="Python">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="python">import json
import urllib2

download_url = "" # Provided by authorize account
file_id = "" # The file ID of the file you want to download
print urllib2.urlopen(download_url + '/b2api/v1/b2_download_file_by_id?fileId=' + file_id)</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>The quick brown fox jumped over the lazy dog.</code></pre>
</div>
<div id="src_swift" title="Swift">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="swift">import Foundation

let downloadUrl = "" // Provided by b2_authorize_account
let fileId = "" // B2 file ID of the file you want to download
let session = NSURLSession.sharedSession()
if let urlComponents = NSURLComponents(string: "\(downloadUrl)/b2api/v1/b2_download_file_by_id") {
    urlComponents.query = "fileId=\(fileId)"
    let request = NSMutableURLRequest(URL: urlComponents.URL!)
    request.HTTPMethod = "GET"
    request.addValue(accountAuthorizationToken, forHTTPHeaderField: "Authorization")
    let task = session.dataTaskWithRequest(request, fromData: uploadData, completionHandler:{ (data: NSData!, response: NSURLResponse!, error: NSError!) -&gt; Void in
        if data != nil {
            // Do something with NSData
        }
    })
    task.resume()
}
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>The quick brown fox jumped over the lazy dog.</code></pre>
</div>
<div id="src_ruby" title="Ruby">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="ruby">require 'json'
require 'net/http'

download_url = "" # Provided by authorize account
file_id = "" # The file ID of the file you want to download
uri = URI("#{download_url}/b2api/v1/b2_download_file_by_id?fileId=#{file_id}")
req = Net::HTTP::Get.new(uri)
http = Net::HTTP.new(req.uri.host, req.uri.port)
http.use_ssl = true
res = http.start {|http| http.request(req)}
case res
when Net::HTTPSuccess then
    res.body
when Net::HTTPRedirection then
    fetch(res['location'], limit - 1)
else
    res.error!
end</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>The quick brown fox jumped over the lazy dog.</code></pre>
</div>
<div id="src_csharp" title="C#">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="csharp">string fileId = "FILE_ID" // The unique file ID
string downloadUrl = "DOWNLOAD_URL"; // Provided by b2_authorize_account
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(downloadUrl + "/b2api/v1/b2_download_file_by_id");
string body = "{\"fileId\":\"" + fileId + "\"}";
var data = Encoding.UTF8.GetBytes(body);
webRequest.Method = "POST";
webRequest.Headers.Add("Authorization", accountAuthorizationToken);
webRequest.ContentType = "application/json; charset=utf-8";
webRequest.ContentLength = data.Length;
using (var stream = webRequest.GetRequestStream())
{
	stream.Write(data, 0, data.Length);
	stream.Close();
}
WebResponse response = (HttpWebResponse)webRequest.GetResponse();
Stream responseStream = response.GetResponseStream();
byte[] fileBytes;
using(BinaryReader  br = new BinaryReader(responseStream))
{
	fileBytes = br.ReadBytes(500000);
	br.Close();
}
responseStream.Close();
response.Close();
String downloadsFolder = @"FILE DIRECTORY HERE";
FileStream saveFile = new FileStream(downloadsFolder, FileMode.Create);
BinaryWriter writeFile = new BinaryWriter(saveFile);
try
{
	writeFile.Write(fileBytes);
}
finally
{
	saveFile.Close();
	writeFile.Close();
}
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>The quick brown fox jumped over the lazy dog.</code></pre>
</div>
<div id="src_php" title="PHP">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="php">$download_url = ""; // From b2_authorize_account call
$file_id = ""; // The ID of the file you want to download
$uri = $download_url . "/b2api/v1/b2_download_file_by_id?fileId=" . $file_id;

$session = curl_init($uri);

curl_setopt($session, CURLOPT_HTTPGET, true); // HTTP GET
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);  // Receive server response
$server_output = curl_exec($session); // Let's do this!
curl_close ($session); // Clean up
echo ($server_output); // Tell me about the rabbits, George!</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>The quick brown fox jumped over the lazy dog.</code></pre>
</div>
</div>
<div id="stylePickerDiv"></div>


          </td>
          <td class="right_column">
            <!-- filler so prior column don't float -->
          </td>
        </tr>
      </tbody>
    </table>
</div>
<hr/>
<section class="container footer">
    <div class="row">
        <div class="col-sm-3">
            <a href="../../online-backup-about.html">About Us</a> | <a href="../../partners.html">Partners</a>
        </div>

        <div class="col-sm-9">
            Resources: <a href="../../edrive.html">External Drives</a> | <a href="../../hard-drive.html">Hard Drive Stats</a> | <a
                href="../../data-backup/backup-your-computer.html">Backup Guide</a><br>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            Backblaze &copy;. <a href="../../privacy.html" style="color:#999999; text-decoration:underline;">Terms &amp;
            Privacy </a>
        </div>
    </div>

</section>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2694151-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
