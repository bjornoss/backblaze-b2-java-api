<!DOCTYPE html>
<html lang="en">
<head>
    <!-- DO NOT EDIT THIS FILE.  It is generated.  See README. -->
    <meta charset="utf-8" />
    <!-- meta name="viewport" content="width=device-width, initial-scale=1" -->
    <title>Calling the API</title> 
    <!-- font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css' />
    <!-- jquery -->
    <script language="JavaScript" src="../../scripts/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/jquery.cookie.js" type="text/javascript"></script>
    <!-- bootstrap -->
    <link href="../css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/bootstrap.min.js" type="text/javascript"></script>
    <!-- backblaze -->
    <link href="../css/b2_nav.css" rel="stylesheet" type="text/css"/>    
    <link href="../css/b2_footer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/b2_main.css" rel="stylesheet" type="text/css"/> 
    <link href="../css/b2-cloud-storage-docs.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/b2-cloud-storage-docs.js" type="text/javascript"></script>
    <script language="JavaScript" src="../js/nav.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/main.js" type="text/javascript"></script>
    <!- highlight.js -->
    <link id="highLightLink" href="../css/highlight/xcode.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" type="text/javascript" src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    
<div class="header clearfix">
    <nav class="navbar navbar-default navbar-fixed-top" style="background-color:#fff;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header b2_docs_nav_bar_hdr">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <div id="nav-icon3">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <a class="navbar-brand" href="/index.html">
                    <img src="https://www.backblaze.com/pics/backblaze-logo.gif"
                         width="180" height="31" alt="Backblaze" style="float:left;"></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="../../cloud-backup.html">Personal Backup</a></li>
                    <li><a href="../../business.html">Business Backup</a></li>
                    <li class="active"><a href="../index.html">B2 Cloud Storage</a></li>
                    <li><a href="../../blog/">Blog</a></li>
                    <li><a href="../../help.html">Help</a></li>
                    <li><a href="../../user_signin.htm">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="b2-docs-subnav-bar">
        <div id="bzSubNav">
            <div class="sub-wrapper container">
            <a id="sub-nav-toggle"><img class="nav-caret" src="../../pics/nav-caret-down.png"></a>
            <ul id="sub-nav-items">
                <li><a href="../cloud-storage.html" id="howItWorks"><span>How B2 Works</span></a>
                </li>
                <li><a href="../cloud-storage-providers.html" id="comparison"><span>Comparison</span></a></li>
                <li><a href="../why-b2.html" id="whyB2"><span>Why B2</span></a></li>
                <li><a href="../b2-use-cases.html" id="bzUseCases"><span>Use Cases</span></a></li>
                <li><a href="index.html" id="bzDoc" class="sub-nav-current"><span>Documentation</span></a></li>
            </ul>
            <div class="nav-button-wrapper">
                <a href="../cloud-storage-pricing.html" class="btn btn-default" role="button">Pricing</a>
                <a href="../get-invite.html" class="btn btn-primary" role="button">Get Invite</a>
            </div>
        </div>


</div>
    </div>

    <table class="doc_container">
        <tbody>
        <tr>
            <td class="left_column">
                <div class="left_nav">
                    <p class="left_nav_header">B2 Storage</p>
                    <p class="left_nav_item" id="index"><a href="index.html">Overview</a></p>
                    <p class="left_nav_item" id="buckets"><a href="buckets.html">Buckets</a></p>
                    <p class="left_nav_item" id="files"><a href="files.html">Files</a></p>
                    <p class="left_nav_item" id="file_versions"><a href="file_versions.html">File Versions</a></p>
                    <p class="left_nav_item" id="calling"><a href="calling.html">Calling the API</a></p>
                    <p class="left_nav_item" id="string_encoding"><a href="string_encoding.html">String Encoding</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Quick Start</p>
                    <p class="left_nav_item" id="quick_account"><a href="quick_account.html">Get An Account</a></p>
                    <p class="left_nav_item" id="quick_command_line"><a href="quick_command_line.html">Command-Line Tool</a></p>
                    <p class="left_nav_item" id="quick_bucket"><a href="quick_bucket.html">Make a Bucket</a></p>
                    <p class="left_nav_item" id="quick_upload"><a href="quick_upload.html">Upload a File</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">API Operations</p>
                    <p class="left_nav_item" id="b2_authorize_account"><a href="b2_authorize_account.html">b2_authorize_account</a></p>
                    <p class="left_nav_item" id="b2_create_bucket"><a href="b2_create_bucket.html">b2_create_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_bucket"><a href="b2_delete_bucket.html">b2_delete_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_file_version"><a href="b2_delete_file_version.html">b2_delete_file_version</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_id"><a href="b2_download_file_by_id.html">b2_download_file_by_id</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_name"><a href="b2_download_file_by_name.html">b2_download_file_by_name</a></p>
                    <p class="left_nav_item" id="b2_get_file_info"><a href="b2_get_file_info.html">b2_get_file_info</a></p>
                    <p class="left_nav_item" id="b2_get_upload_url"><a href="b2_get_upload_url.html">b2_get_upload_url</a></p>
                    <p class="left_nav_item" id="b2_hide_file"><a href="b2_hide_file.html">b2_hide_file</a></p>
                    <p class="left_nav_item" id="b2_list_buckets"><a href="b2_list_buckets.html">b2_list_buckets</a></p>
                    <p class="left_nav_item" id="b2_list_file_names"><a href="b2_list_file_names.html">b2_list_file_names</a></p>
                    <p class="left_nav_item" id="b2_list_file_versions"><a href="b2_list_file_versions.html">b2_list_file_versions</a></p>
                    <p class="left_nav_item" id="b2_update_bucket"><a href="b2_update_bucket.html">b2_update_bucket</a></p>
                    <p class="left_nav_item" id="b2_upload_file"><a href="b2_upload_file.html">b2_upload_file</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Source Code Bundles</p>
                    <p class="left_nav_item" id="b2-python-pusher"><a href="b2-python-pusher.html">B2 Python Pusher</a></p>
                    <p class="left_nav_item" id="playground"><a href="playground.html">Swift Playground</a></p>
                </div>
            </td>
            <td class="middle_column">

            
<h1>Calling the API</h1>

<h1>POST JSON -> JSON</h1>

<p class="doc_intro">
    Most of the API calls for B2 Cloud Storage accept a POST with JSON
    data, and return JSON data.  The code samples for each of the calls
    show how to do that in a variety of languages.
</p>

<p>
    This is a simple example using <code>curl</code> on the command-line:
</p>

<pre class="code">ACCOUNT_ID=... # Comes from your account page on the Backblaze web site
ACCOUNT_AUTH_TOKEN=... # Comes from the b2_authorize_account call
API_URL=... # Comes from the b2_authorize_account call
BUCKET_NAME=any_name_you_pick # 50 char max: letters, digits, “-“ and “_”
BUCKET_TYPE=allPrivate # Either allPublic or allPrivate

curl -H "Authorization: $ACCOUNT_AUTH_TOKEN" \
    -d "{\"accountId\":  \"$ACCOUNT_ID\", \"bucketName\": \"$BUCKET_NAME\", \"bucketType\": \"$BUCKET_TYPE\"}' \
    "$API_URL/b2api/v1/b2_create_bucket"
</pre>

<p>
    Will return this:
</p>

<pre class="code">{
    "bucketId" : "4a48fe8875c6214145260818",
    "accountId" : "010203040506",
    "bucketName" : "any_name_you_pick",
    "bucketType" : "allPrivate"
}
</pre>

<h2>GET -> JSON</h2>

<p>
    All API calls that accept POST-ed JSON also accept the parameters as URL
    query parameters.  This is much more convenient for ad-hoc requests
    that you type by hand, and for using in a browser.
</p>

<p>
    This request is equivalent to the one above:
</p>

<pre class="code">ACCOUNT_ID=... # Comes from your account page on the Backblaze web site
ACCOUNT_AUTH_TOKEN=... # Comes from the b2_authorize_account call
API_URL=... # Comes from the b2_authorize_account call
BUCKET_NAME=any_name_you_pick # 50 char max: letters, digits, “-“ and “_”
BUCKET_TYPE=allPrivate # Either allPublic or allPrivate

curl -H "Authorization: $ACCOUNT_AUTH_TOKEN" \
    "$API_URL/b2api/v1/b2_create_bucket?accountId=$ACCOUNT_ID&bucketName=$BUCKET_NAME&bucketType=$BUCKET_TYPE"

</pre>

<h2>Uploading Files</h2>

<p>
    When you upload a file, the body of the POST is the file being uploaded,
    and the other information is passed in the HTTP headers.
</p>

<pre class="code">curl \
    -H 'Authorization: $BUCKET_AUTH_TOKEN' \
    -H 'X-Bz-File-Name: typing_test.txt' \
    -H 'Content-Type: text/plain' \
    -H 'X-Bz-Content-Sha1: bae5ed658ab3546aee12f23f36392f35dba1ebdd' \
    -H 'X-Bz-Info-Author: unknown' \
    -d @typing_test.txt \
    $UPLOAD_URL
</pre>

<p>
    This will return a JSON response containing the File ID of the new file:
</p>

<pre class="code">{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt",
    "accountId" : "d522aa47a10f",
    "bucketId" : "4a48fe8875c6214145260818",
    "contentLength" : 46,
    "contentSha1" : "bae5ed658ab3546aee12f23f36392f35dba1ebdd",
    "contentType" : "text/plain",
    "fileInfo" : {
       "author" : "unknown"
    }
}
</pre>

<h2>Downloading Files</h2>

<p>
    To download a file by name, you simply GET a path built from the
    download URL that <a href="b2_authorize_account.html"><code>b2_authorize_account</code></a>
    returned, <code>/file/</code>, the name of the bucket, and the name
    of the file, such as:
</p>

<pre class="code">curl https://f001.backblaze.com/file/photos/cats/kitten.jpg</pre>

<p>
    The file will be returned, and the information about the file, including
    its SHA1 and MIME type is in the HTTP headers:
</p>

<h2>Error Handling</h2>

<p>
    Failures to connect to the B2 servers, and networking problems
    in general can cause errors, which are reported in the normal way.
    If you get a response from B2, and it's an error, the HTTP status code
    will indicate what type of error, and the body of the response will
    be a JSON object indicating what went wrong.
</p>


<div class="b2_params">
    <div class="param">
        <p class="param_name">status</p>
        <p class="param_description">
            The numeric HTTP status code.  Always matches the status in the
            HTTP response.
        </p>
    </div>
    <div class="param">
        <p class="param_name">code</p>
        <p class="param_description">
            A single-identifier code that identifies the error.
        </p>
    </div>
    <div class="param">
        <p class="param_name">message</p>
        <p class="param_description">
            A human-readable message, in English, saying what went wrong.
        </p>
    </div>
</div>

<p>Example:</p>

<pre class="code">{
    "status" : 503,
    "code" : "invalid_bucket_name",
    "reason" : "bucket name is too long"
}
</pre>







    

          </td>
          <td class="right_column">
            <!-- filler so prior column don't float -->
          </td>
        </tr>
      </tbody>
    </table>
</div>
<hr/>
<section class="container footer">
    <div class="row">
        <div class="col-sm-3">
            <a href="../../online-backup-about.html">About Us</a> | <a href="../../partners.html">Partners</a>
        </div>

        <div class="col-sm-9">
            Resources: <a href="../../edrive.html">External Drives</a> | <a href="../../hard-drive.html">Hard Drive Stats</a> | <a
                href="../../data-backup/backup-your-computer.html">Backup Guide</a><br>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            Backblaze &copy;. <a href="../../privacy.html" style="color:#999999; text-decoration:underline;">Terms &amp;
            Privacy </a>
        </div>
    </div>

</section>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2694151-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
