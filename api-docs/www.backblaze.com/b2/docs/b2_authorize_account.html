<!DOCTYPE html>
<html lang="en">
<head>
    <!-- DO NOT EDIT THIS FILE.  It is generated.  See README. -->
    <meta charset="utf-8" />
    <!-- meta name="viewport" content="width=device-width, initial-scale=1" -->
    <title>b2_authorize_account</title> 
    <!-- font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css' />
    <!-- jquery -->
    <script language="JavaScript" src="../../scripts/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/jquery.cookie.js" type="text/javascript"></script>
    <!-- bootstrap -->
    <link href="../css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/bootstrap.min.js" type="text/javascript"></script>
    <!-- backblaze -->
    <link href="../css/b2_nav.css" rel="stylesheet" type="text/css"/>    
    <link href="../css/b2_footer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/b2_main.css" rel="stylesheet" type="text/css"/> 
    <link href="../css/b2-cloud-storage-docs.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/b2-cloud-storage-docs.js" type="text/javascript"></script>
    <script language="JavaScript" src="../js/nav.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/main.js" type="text/javascript"></script>
    <!- highlight.js -->
    <link id="highLightLink" href="../css/highlight/xcode.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" type="text/javascript" src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    
<div class="header clearfix">
    <nav class="navbar navbar-default navbar-fixed-top" style="background-color:#fff;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header b2_docs_nav_bar_hdr">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <div id="nav-icon3">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <a class="navbar-brand" href="/index.html">
                    <img src="https://www.backblaze.com/pics/backblaze-logo.gif"
                         width="180" height="31" alt="Backblaze" style="float:left;"></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="../../cloud-backup.html">Personal Backup</a></li>
                    <li><a href="../../business.html">Business Backup</a></li>
                    <li class="active"><a href="../index.html">B2 Cloud Storage</a></li>
                    <li><a href="../../blog/">Blog</a></li>
                    <li><a href="../../help.html">Help</a></li>
                    <li><a href="../../user_signin.htm">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="b2-docs-subnav-bar">
        <div id="bzSubNav">
            <div class="sub-wrapper container">
            <a id="sub-nav-toggle"><img class="nav-caret" src="../../pics/nav-caret-down.png"></a>
            <ul id="sub-nav-items">
                <li><a href="../cloud-storage.html" id="howItWorks"><span>How B2 Works</span></a>
                </li>
                <li><a href="../cloud-storage-providers.html" id="comparison"><span>Comparison</span></a></li>
                <li><a href="../why-b2.html" id="whyB2"><span>Why B2</span></a></li>
                <li><a href="../b2-use-cases.html" id="bzUseCases"><span>Use Cases</span></a></li>
                <li><a href="index.html" id="bzDoc" class="sub-nav-current"><span>Documentation</span></a></li>
            </ul>
            <div class="nav-button-wrapper">
                <a href="../cloud-storage-pricing.html" class="btn btn-default" role="button">Pricing</a>
                <a href="../get-invite.html" class="btn btn-primary" role="button">Get Invite</a>
            </div>
        </div>


</div>
    </div>

    <table class="doc_container">
        <tbody>
        <tr>
            <td class="left_column">
                <div class="left_nav">
                    <p class="left_nav_header">B2 Storage</p>
                    <p class="left_nav_item" id="index"><a href="index.html">Overview</a></p>
                    <p class="left_nav_item" id="buckets"><a href="buckets.html">Buckets</a></p>
                    <p class="left_nav_item" id="files"><a href="files.html">Files</a></p>
                    <p class="left_nav_item" id="file_versions"><a href="file_versions.html">File Versions</a></p>
                    <p class="left_nav_item" id="calling"><a href="calling.html">Calling the API</a></p>
                    <p class="left_nav_item" id="string_encoding"><a href="string_encoding.html">String Encoding</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Quick Start</p>
                    <p class="left_nav_item" id="quick_account"><a href="quick_account.html">Get An Account</a></p>
                    <p class="left_nav_item" id="quick_command_line"><a href="quick_command_line.html">Command-Line Tool</a></p>
                    <p class="left_nav_item" id="quick_bucket"><a href="quick_bucket.html">Make a Bucket</a></p>
                    <p class="left_nav_item" id="quick_upload"><a href="quick_upload.html">Upload a File</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">API Operations</p>
                    <p class="left_nav_item" id="b2_authorize_account"><a href="b2_authorize_account.html">b2_authorize_account</a></p>
                    <p class="left_nav_item" id="b2_create_bucket"><a href="b2_create_bucket.html">b2_create_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_bucket"><a href="b2_delete_bucket.html">b2_delete_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_file_version"><a href="b2_delete_file_version.html">b2_delete_file_version</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_id"><a href="b2_download_file_by_id.html">b2_download_file_by_id</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_name"><a href="b2_download_file_by_name.html">b2_download_file_by_name</a></p>
                    <p class="left_nav_item" id="b2_get_file_info"><a href="b2_get_file_info.html">b2_get_file_info</a></p>
                    <p class="left_nav_item" id="b2_get_upload_url"><a href="b2_get_upload_url.html">b2_get_upload_url</a></p>
                    <p class="left_nav_item" id="b2_hide_file"><a href="b2_hide_file.html">b2_hide_file</a></p>
                    <p class="left_nav_item" id="b2_list_buckets"><a href="b2_list_buckets.html">b2_list_buckets</a></p>
                    <p class="left_nav_item" id="b2_list_file_names"><a href="b2_list_file_names.html">b2_list_file_names</a></p>
                    <p class="left_nav_item" id="b2_list_file_versions"><a href="b2_list_file_versions.html">b2_list_file_versions</a></p>
                    <p class="left_nav_item" id="b2_update_bucket"><a href="b2_update_bucket.html">b2_update_bucket</a></p>
                    <p class="left_nav_item" id="b2_upload_file"><a href="b2_upload_file.html">b2_upload_file</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Source Code Bundles</p>
                    <p class="left_nav_item" id="b2-python-pusher"><a href="b2-python-pusher.html">B2 Python Pusher</a></p>
                    <p class="left_nav_item" id="playground"><a href="playground.html">Swift Playground</a></p>
                </div>
            </td>
            <td class="middle_column">

    
<h1 class="doc_header">b2_authorize_account</h1>

<p>
    <span class="doc_intro">Used to log in to the B2 API.  Returns an authorization token that can be used
    for account-level operations, and a URL that should be used as the base URL for
    subsequent API calls.</span>
</p>

<h2>Request</h2>
<h3>Request HTTP Headers</h3>

<div class="b2_params">
    <div class="param">
        <p class="param_name">Authorization</p>
        <p class="param_required">required</p>
        <div class="param_description">
            <p>
                An <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">HTTP basic auth</a> value constructed as follows:
            </p>
            <ul>
                <li>The B2 account id and B2 application key for the account are combined into a string in the format "accountId:applicationKey".</li>
                <li>The combined string is <a href="https://en.wikipedia.org/wiki/Base64">Base64</a> encoded.</li>
                <li>"Basic " is put before the encoded string.</li>
            </ul>
        </div>
    </div>
</div>

<h3>Request HTTP Message Body Parameters</h3>

<p>
    This request has no parameters.  The Authorization header is all that is needed.
</p>

<h2>Response</h2>

<h3>JSON Response Body</h3>

<p>
    When the request is successful (status 200), this is the information that is returned.
</p>

<div class="b2_params">
    <div class="param">
        <p class="param_name">accountId</p>
        <p class="param_description">
            The identifier for the account.
        </p>
    </div>
    <div class="param">
        <p class="param_name">authorizationToken</p>
        <p class="param_description">
            An authorization token to use with all calls, other than
            b2_authorize_account, that need an Authorization header.
        </p>
    </div>
    <div class="param">
        <p class="param_name">apiUrl</p>
        <p class="param_description">
            The base URL to use for all API calls except for uploading
            and downloading files.
        </p>
    </div>
    <div class="param">
        <p class="param_name">downloadUrl</p>
        <p class="param_description">
            The base URL to use for downloading files.
        </p>
    </div>
</div>

<h3>HTTP Status Code</h3>

<div class="b2_params">
    <div class="param">
        <p class="param_name">200</p>
        <p class="param_description">
            The request was successful, and the response contains the JSON
            structure described above.
        </p>
    </div>
    <div class="param">
        <p class="param_name">400</p>
        <p class="param_description">
            BAD REQUEST -
            The JSON error structure returned contains an error code and
            a human-readable error message.
        </p>
    </div>
    <div class="param">
        <p class="param_name">401</p>
        <p class="param_description">
            UNAUTHORIZED -
            The account ID is wrong, the account does not have B2 enabled,
            or the application key is not valid.
        </p>
    </div>
</div>





    
<!-- DO NOT EDIT - this section generated by build-doc.py -->

<h2>Sample Code</h2>
<nav id="example_bar"></nav>
<div id="example_source">
<div id="src_curl" title="cUrl">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="bash">curl https://api.backblaze.com/b2api/v1/b2_authorize_account -u "ACCOUNT_ID:APPLICATION_KEY"</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
  "accountId": "YOUR_ACCOUNT_ID",
  "apiUrl": "https://api900.backblaze.com",
  "authorizationToken": "2_20150807002553_443e98bf57f978fa58c284f8_24d25d99772e3ba927778b39c9b0198f412d2163_acct",
  "downloadUrl": "https://f900.backblaze.com"
}

</code></pre>
</div>
<div id="src_java" title="Java">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="java">String accountId = ""; // Obtained from your B2 account page.
String applicationKey = ""; // Obtained from your B2 account page.
HttpURLConnection connection = null;
String headerForAuthorizeAccount = "Basic " + Base64.encodeBase64String((accountId + ":" + applicationKey).getBytes());
try {
    URL url = new URL("https://api.backblaze.com/b2api/v1/b2_authorize_account");
    connection = (HttpURLConnection)url.openConnection();
    connection.setRequestMethod("GET");
    connection.setRequestProperty("Authorization", headerForAuthorizeAccount);
    InputStream in = new BufferedInputStream(connection.getInputStream());
    // You will need to implement myInputStreamReader.
    myInputStreamReader(in);
} catch (Exception e) {
    e.printStackTrace();
} finally {
    connection.disconnect();
}
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
  "accountId": "YOUR_ACCOUNT_ID",
  "apiUrl": "https://api900.backblaze.com",
  "authorizationToken": "2_20150807002553_443e98bf57f978fa58c284f8_24d25d99772e3ba927778b39c9b0198f412d2163_acct",
  "downloadUrl": "https://f900.backblaze.com"
}

</code></pre>
</div>
<div id="src_python" title="Python">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="python">import base64
import json
import urllib2

id_and_key = 'hexAccountId_value:accountKey_value'
basic_auth_string = 'Basic ' + base64.b64encode(id_and_key)
headers = { 'Authorization': basic_auth_string }

request = urllib2.Request(
    'https://api.backblaze.com/b2api/v1/b2_authorize_account',
    headers = headers
    )
response = urllib2.urlopen(request)
response_data = json.loads(response.read())
response.close()

print 'auth token:  ', response_data['authorizationToken']
print 'api url:     ', response_data['apiUrl']
print 'download url:', response_data['downloadUrl']
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>auth token:   2_20150812013854_a01f0090bb8e38e6c332e1cd_40106700acdf06d4fd4053d4ff4072da4e71c154_acct
api url:      https://api001.backblaze.com
download url: https://f100.backblaze.com
</code></pre>
</div>
<div id="src_swift" title="Swift">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="swift">import Foundation

var accountId = "ACCOUNT_ID" // Obtained from your B2 account page.
var applicationKey = "APPLICATION_KEY" // Obtained from your B2 account page.
if let url = NSURL(string: "https://api.backblaze.com/b2api/v1/b2_authorize_account") {    
    let base64Str = "\(accountId):\(applicationKey)".dataUsingEncoding(NSUTF8StringEncoding)!.base64EncodedStringWithOptions(.Encoding76CharacterLineLength)
    let request = NSMutableURLRequest(URL: url)
    request.HTTPMethod = "GET"
    let authSessionConfig = NSURLSessionConfiguration.defaultSessionConfiguration()
    authSessionConfig.HTTPAdditionalHeaders = ["Authorization":"Basic \(base64Str)"]
    let session = NSURLSession(configuration: authSessionConfig);
    let task = session.dataTaskWithRequest(request, completionHandler:{(data: NSData!, response: NSURLResponse!, error: NSError!) -&gt; Void in
        if data != nil {
            let json = NSString(data: data, encoding:NSUTF8StringEncoding)
        }
    })
    task.resume()
}
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
  "accountId": "YOUR_ACCOUNT_ID",
  "apiUrl": "https://api900.backblaze.com",
  "authorizationToken": "2_20150807002553_443e98bf57f978fa58c284f8_24d25d99772e3ba927778b39c9b0198f412d2163_acct",
  "downloadUrl": "https://f900.backblaze.com"
}
</code></pre>
</div>
<div id="src_ruby" title="Ruby">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="ruby">require 'json'
require 'net/http'

account_id = "ACCOUNT_ID" # Obtained from your B2 account page.
application_key = "APPLICATION_KEY" # Obtained from your B2 account page.
uri = URI("https://api.backblaze.com/b2api/v1/b2_authorize_account")
req = Net::HTTP::Get.new(uri)	
req.basic_auth(accountId, application_key)    
http = Net::HTTP.new(req.uri.host, req.uri.port)
http.use_ssl = true
res = http.start {|http| http.request(req)}
case res
when Net::HTTPSuccess then
    json = res.body
when Net::HTTPRedirection then
    fetch(res['location'], limit - 1)
else
    res.error!
end</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
  "accountId": "YOUR_ACCOUNT_ID",
  "apiUrl": "https://api900.backblaze.com",
  "authorizationToken": "2_20150807002553_443e98bf57f978fa58c284f8_24d25d99772e3ba927778b39c9b0198f412d2163_acct",
  "downloadUrl": "https://f900.backblaze.com"
}
</code></pre>
</div>
<div id="src_csharp" title="C#">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="csharp">String accountId = "ACCOUNT_ID"; //B2 Cloud Storage Account ID
String applicationKey = "APPLICATION_KEY"; //B2 Cloud Storage Application Key
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("https://api.backblaze.com/b2api/v1/b2_authorize_account");
string credentials = Convert.ToBase64String(Encoding.UTF8.GetBytes(accountId + ":" + applicationKey));
webRequest.Headers.Add("Authorization", "Basic " + credentials);
webRequest.ContentType = "application/json; charset=utf-8";
WebResponse response = (HttpWebResponse)webRequest.GetResponse();
var responseString = new StreamReader(response.GetResponseStream()).ReadToEnd();
response.Close();
Console.WriteLine(responseString);</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
  "accountId": "YOUR_ACCOUNT_ID",
  "apiUrl": "https://api900.backblaze.com",
  "authorizationToken": "2_20150807002553_443e98bf57f978fa58c284f8_24d25d99772e3ba927778b39c9b0198f412d2163_acct",
  "downloadUrl": "https://f900.backblaze.com"
}
</code></pre>
</div>
<div id="src_php" title="PHP">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="php">$account_id = ""; // Obtained from your B2 account page
$application_key = ""; // Obtained from your B2 account page
$credentials = base64_encode($account_id . ":" . $application_key);
$url = "https://api.backblaze.com/b2api/v1/b2_authorize_account";

$session = curl_init($url);

// Add headers
$headers = array();
$headers[] = "Accept: application/json";
$headers[] = "Authorization: Basic " . $credentials;
curl_setopt($session, CURLOPT_HTTPHEADER, $headers);  // Add headers

curl_setopt($session, CURLOPT_HTTPGET, true);  // HTTP GET
curl_setopt($session, CURLOPT_RETURNTRANSFER, true); // Receive server response
$server_output = curl_exec($session);
curl_close ($session);
echo ($server_output);</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
  "accountId": "YOUR_ACCOUNT_ID",
  "apiUrl": "https://api900.backblaze.com",
  "authorizationToken": "2_20150807002553_443e98bf57f978fa58c284f8_24d25d99772e3ba927778b39c9b0198f412d2163_acct",
  "downloadUrl": "https://f900.backblaze.com"
}

</code></pre>
</div>
</div>
<div id="stylePickerDiv"></div>


          </td>
          <td class="right_column">
            <!-- filler so prior column don't float -->
          </td>
        </tr>
      </tbody>
    </table>
</div>
<hr/>
<section class="container footer">
    <div class="row">
        <div class="col-sm-3">
            <a href="../../online-backup-about.html">About Us</a> | <a href="../../partners.html">Partners</a>
        </div>

        <div class="col-sm-9">
            Resources: <a href="../../edrive.html">External Drives</a> | <a href="../../hard-drive.html">Hard Drive Stats</a> | <a
                href="../../data-backup/backup-your-computer.html">Backup Guide</a><br>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            Backblaze &copy;. <a href="../../privacy.html" style="color:#999999; text-decoration:underline;">Terms &amp;
            Privacy </a>
        </div>
    </div>

</section>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2694151-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
