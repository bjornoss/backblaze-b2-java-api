<!DOCTYPE html>
<html lang="en">
<head>
    <!-- DO NOT EDIT THIS FILE.  It is generated.  See README. -->
    <meta charset="utf-8" />
    <!-- meta name="viewport" content="width=device-width, initial-scale=1" -->
    <title>b2_delete_file_version</title> 
    <!-- font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css' />
    <!-- jquery -->
    <script language="JavaScript" src="../../scripts/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/jquery.cookie.js" type="text/javascript"></script>
    <!-- bootstrap -->
    <link href="../css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/bootstrap.min.js" type="text/javascript"></script>
    <!-- backblaze -->
    <link href="../css/b2_nav.css" rel="stylesheet" type="text/css"/>    
    <link href="../css/b2_footer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/b2_main.css" rel="stylesheet" type="text/css"/> 
    <link href="../css/b2-cloud-storage-docs.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/b2-cloud-storage-docs.js" type="text/javascript"></script>
    <script language="JavaScript" src="../js/nav.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/main.js" type="text/javascript"></script>
    <!- highlight.js -->
    <link id="highLightLink" href="../css/highlight/xcode.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" type="text/javascript" src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    
<div class="header clearfix">
    <nav class="navbar navbar-default navbar-fixed-top" style="background-color:#fff;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header b2_docs_nav_bar_hdr">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <div id="nav-icon3">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <a class="navbar-brand" href="/index.html">
                    <img src="https://www.backblaze.com/pics/backblaze-logo.gif"
                         width="180" height="31" alt="Backblaze" style="float:left;"></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="../../cloud-backup.html">Personal Backup</a></li>
                    <li><a href="../../business.html">Business Backup</a></li>
                    <li class="active"><a href="../index.html">B2 Cloud Storage</a></li>
                    <li><a href="../../blog/">Blog</a></li>
                    <li><a href="../../help.html">Help</a></li>
                    <li><a href="../../user_signin.htm">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="b2-docs-subnav-bar">
        <div id="bzSubNav">
            <div class="sub-wrapper container">
            <a id="sub-nav-toggle"><img class="nav-caret" src="../../pics/nav-caret-down.png"></a>
            <ul id="sub-nav-items">
                <li><a href="../cloud-storage.html" id="howItWorks"><span>How B2 Works</span></a>
                </li>
                <li><a href="../cloud-storage-providers.html" id="comparison"><span>Comparison</span></a></li>
                <li><a href="../why-b2.html" id="whyB2"><span>Why B2</span></a></li>
                <li><a href="../b2-use-cases.html" id="bzUseCases"><span>Use Cases</span></a></li>
                <li><a href="index.html" id="bzDoc" class="sub-nav-current"><span>Documentation</span></a></li>
            </ul>
            <div class="nav-button-wrapper">
                <a href="../cloud-storage-pricing.html" class="btn btn-default" role="button">Pricing</a>
                <a href="../get-invite.html" class="btn btn-primary" role="button">Get Invite</a>
            </div>
        </div>


</div>
    </div>

    <table class="doc_container">
        <tbody>
        <tr>
            <td class="left_column">
                <div class="left_nav">
                    <p class="left_nav_header">B2 Storage</p>
                    <p class="left_nav_item" id="index"><a href="index.html">Overview</a></p>
                    <p class="left_nav_item" id="buckets"><a href="buckets.html">Buckets</a></p>
                    <p class="left_nav_item" id="files"><a href="files.html">Files</a></p>
                    <p class="left_nav_item" id="file_versions"><a href="file_versions.html">File Versions</a></p>
                    <p class="left_nav_item" id="calling"><a href="calling.html">Calling the API</a></p>
                    <p class="left_nav_item" id="string_encoding"><a href="string_encoding.html">String Encoding</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Quick Start</p>
                    <p class="left_nav_item" id="quick_account"><a href="quick_account.html">Get An Account</a></p>
                    <p class="left_nav_item" id="quick_command_line"><a href="quick_command_line.html">Command-Line Tool</a></p>
                    <p class="left_nav_item" id="quick_bucket"><a href="quick_bucket.html">Make a Bucket</a></p>
                    <p class="left_nav_item" id="quick_upload"><a href="quick_upload.html">Upload a File</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">API Operations</p>
                    <p class="left_nav_item" id="b2_authorize_account"><a href="b2_authorize_account.html">b2_authorize_account</a></p>
                    <p class="left_nav_item" id="b2_create_bucket"><a href="b2_create_bucket.html">b2_create_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_bucket"><a href="b2_delete_bucket.html">b2_delete_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_file_version"><a href="b2_delete_file_version.html">b2_delete_file_version</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_id"><a href="b2_download_file_by_id.html">b2_download_file_by_id</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_name"><a href="b2_download_file_by_name.html">b2_download_file_by_name</a></p>
                    <p class="left_nav_item" id="b2_get_file_info"><a href="b2_get_file_info.html">b2_get_file_info</a></p>
                    <p class="left_nav_item" id="b2_get_upload_url"><a href="b2_get_upload_url.html">b2_get_upload_url</a></p>
                    <p class="left_nav_item" id="b2_hide_file"><a href="b2_hide_file.html">b2_hide_file</a></p>
                    <p class="left_nav_item" id="b2_list_buckets"><a href="b2_list_buckets.html">b2_list_buckets</a></p>
                    <p class="left_nav_item" id="b2_list_file_names"><a href="b2_list_file_names.html">b2_list_file_names</a></p>
                    <p class="left_nav_item" id="b2_list_file_versions"><a href="b2_list_file_versions.html">b2_list_file_versions</a></p>
                    <p class="left_nav_item" id="b2_update_bucket"><a href="b2_update_bucket.html">b2_update_bucket</a></p>
                    <p class="left_nav_item" id="b2_upload_file"><a href="b2_upload_file.html">b2_upload_file</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Source Code Bundles</p>
                    <p class="left_nav_item" id="b2-python-pusher"><a href="b2-python-pusher.html">B2 Python Pusher</a></p>
                    <p class="left_nav_item" id="playground"><a href="playground.html">Swift Playground</a></p>
                </div>
            </td>
            <td class="middle_column">

    
<h1>b2_delete_file_version</h1>

<p class="doc_intro">
  Deletes one version of a file from B2.
</p>

<p>
    If the version you delete is the latest version, and there are older versions,
    then the most recent older version will become the current version,
    and be the one that you'll get when downloading by name. See the
    <a href="file_versions.html">File Versions</a> page for more details.
</p>

<h2>Request</h2>

<h3>Request HTTP Headers</h3>

<div class="b2_params">
    <div class="param">
        <p class="param_name">Authorization</p>
        <p class="param_required">required</p>
        <p class="param_description">
            The account authorization token returned by <a href="b2_authorize_account.html"><code>b2_authorize_account</code></a>.
        </p>
    </div>
</div>

<h2>Request HTTP Message Body Parameters</h2>

<div class="b2_params">
    <div class="param">
        <p class="param_name">fileName</p>
        <p class="param_required">required</p>
        <p class="param_description">
            The name of the file.
        </p>
    </div>
    <div class="param">
        <p class="param_name">fileId</p>
        <p class="param_required">required</p>
        <p class="param_description">
            The ID of the file, as returned by
            <a href="b2_upload_file.html"><code>b2_upload_file</code></a>,
            <a href="b2_list_file_names.html"><code>b2_list_file_names</code></a>, or
            <a href="b2_list_file_names.html"><code>b2_list_file_versions</code></a>.
        </p>
    </div>
</div>

<h3>Return Value</h3>

<p>
    On success, the HTTP return status is 200.  Anything other than 200 is failure and the file version will not be deleted. 
	On failure if possible the server will return the following JSON structure with more information about the error:<br>
	<pre>   { &quot;code&quot;: &quot;codeValue&quot;,<br>     &quot;message&quot;: &quot;messageValue&quot;,<br>     &quot;status&quot;: http_ret_status_int }</pre>
	where the messageValue is a human readable message.
</p>

<h2>Response</h2>

<div class="b2_params">
    <div class="param">
        <p class="param_name">fileId</p>
        <p class="param_description">The unique ID of the file version that was deleted.</p>
    </div>
    <div class="param">
        <p class="param_name">fileName</p>
        <p class="param_description">The name of the file.</p>
    </div>
</div>



    
<!-- DO NOT EDIT - this section generated by build-doc.py -->

<h2>Sample Code</h2>
<nav id="example_bar"></nav>
<div id="example_source">
<div id="src_curl" title="cUrl">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="bash">curl \
    -H "Authorization: ACCOUNT_AUTHORIZATION_TOKEN" \
    -d '{"fileName": "FILE_NAME", "fileId": "FILE_ID"}' \
    https://apiNN.backblaze.com/b2api/v1/b2_delete_file_version

</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt"
}
</code></pre>
</div>
<div id="src_java" title="Java">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="java">String apiUrl = ""; // Provided by b2_authorize_account
String fileId = "";  // The fileId of the file you want to delete
String fileName = ""; // Name of the file you want to delete
String accountAuthorizationToken = ""; // Provided by b2_authorize_account
HttpURLConnection connection = null;
String json = null;
byte postData[] = "{\"fileId\":\"" + fileId + "\",\"fileName\":\"" + fileName + "\"}".getBytes(StandardCharsets.UTF_8);
try {
    URL url = new URL(apiUrl + "/b2api/v1/b2_delete_file_version");
    connection = (HttpURLConnection)url.openConnection();
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Authorization", accountAuthorizationToken);
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
    connection.setRequestProperty("charset", "utf-8");
    connection.setRequestProperty("Content-Length", Integer.toString(postData.length));
    connection.setDoOutput(true);
    DataOutputStream writer = new DataOutputStream(connection.getOutputStream());
    writer.write(postData);
    json = myInputStreamHandler(connection.getInputStream());
} catch (Exception e) {
    e.printStackTrace();
} finally {
    connection.disconnect();
}</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt"
}
</code></pre>
</div>
<div id="src_python" title="Python">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="python">import json
import urllib2

api_url = "" # Provided by b2_authorize_account
account_authorization_token = "" # Provided by b2_authorize_account
file_name = "" # The name of the file you want to delete
file_id = "" # The fileId of the file you want to delete

request = urllib2.Request(
    '%s/b2api/v1/b2_delete_file_version' % api_url,
    json.dumps({ 'fileName' : file_name, 'fileId' : file_id }),
    headers = { 'Authorization': account_authorization_token }
    )
response = urllib2.urlopen(request)
response_data = json.loads(response.read())
response.close()
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt"
}
</code></pre>
</div>
<div id="src_swift" title="Swift">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="swift">import Foundation

apiUrl = "" // Provided by b2_authorize_account
accountAuthorizationToken = "" // Provided by b2_authorize_account
fileName = "" // The name of the file you want to delete
fileId = "" // The fileId of the file you want to delete
let session = NSURLSession.sharedSession()
let request = NSMutableURLRequest(URL: url.URLByAppendingPathComponent("/b2api/v1/b2_delete_file_version"))
request.HTTPMethod = "POST"
request.addValue(accountAuthorizationToken, forHTTPHeaderField: "Authorization")
request.HTTPBody = "{\"fileName\":\"\(fileName)\",\"fileId\":\"\(fileId)\"}".dataUsingEncoding(NSUTF8StringEncoding, allowLossyConversion: false)
let task = session.dataTaskWithRequest(request, completionHandler:{ (data: NSData!, response: NSURLResponse!, error: NSError!) -&gt; Void in
	if data != nil {
        let json = NSString(data: data, encoding:NSUTF8StringEncoding)
    }
})
task.resume()
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt"
}
</code></pre>
</div>
<div id="src_ruby" title="Ruby">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="ruby">require 'json'
require 'net/http'

api_url = "" # Provided by b2_authorize_account
account_authorization_token = "" # Provided by b2_authorize_account
file_name = "" # The name of the file you want to delete
file_id = "" # The fileId of the file you want to delete
uri = URI("#{api_url}/b2api/v1/b2_delete_file_version")
req = Net::HTTP::Post.new(uri)
req.add_field("Authorization","#{account_authorization_token}")
req.body = "{\"fileName\":\"\(file_name)\", \"fileId\":\"\(file_id)\"}"
http = Net::HTTP.new(req.uri.host, req.uri.port)
http.use_ssl = true
res = http.start {|http| http.request(req)}
case res
when Net::HTTPSuccess then
    res.body
when Net::HTTPRedirection then
    fetch(res['location'], limit - 1)
else
    res.error!
end
    </code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt"
}
</code></pre>
</div>
<div id="src_csharp" title="C#">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="csharp">String apiUrl = "API_URL"; //Provided by b2_authorize_account
String accountAuthorizationToken = "ACCOUNT_AUTHORIZATION_TOKEN"; //Provided by b2_authorize_account
String fileName = "FILE_NAME"; //The name of the file
String fileId = "FILE_ID"; //The unique file ID
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(apiUrl + "/b2api/v1/b2_delete_file_version");
string body =
   "{\"fileName\":\"" + fileName + "\",\n" +
   "\"fileId\":\"" + fileId + "\"}";
var data = Encoding.UTF8.GetBytes(body);
webRequest.Method = "POST";
webRequest.Headers.Add("Authorization", accountAuthorizationToken);
webRequest.ContentType = "application/json; charset=utf-8";
webRequest.ContentLength = data.Length;
using (var stream = webRequest.GetRequestStream())
{
	stream.Write(data, 0, data.Length);
	stream.Close();
}
WebResponse response = (HttpWebResponse)webRequest.GetResponse();
var responseString = new StreamReader(response.GetResponseStream()).ReadToEnd();
response.Close();
Console.WriteLine(responseString);</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt"
}</code></pre>
</div>
<div id="src_php" title="PHP">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="php">$api_url = ""; // From b2_authorize_account call
$auth_token = ""; // From b2_authorize_account call
$file_id = "";  // The ID of the file you want to delete
$file_name = "file.txt"; // The file name of the file you want to delete

$session = curl_init($api_url .  "/b2api/v1/b2_delete_file_version");

// Add post fields
$data = array("fileId" =&gt; $file_id, "fileName" =&gt; $file_name);
$post_fields = json_encode($data);
curl_setopt($session, CURLOPT_POSTFIELDS, $post_fields); 

// Add headers
$headers = array();
$headers[] = "Authorization: " . $auth_token;
curl_setopt($session, CURLOPT_HTTPHEADER, $headers); 

curl_setopt($session, CURLOPT_POST, true); // HTTP POST
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);  // Receive server response
$server_output = curl_exec($session); // Let's do this!
curl_close ($session); // Clean up
echo ($server_output); // Tell me about the rabbits, George!</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt"
}
</code></pre>
</div>
</div>
<div id="stylePickerDiv"></div>


          </td>
          <td class="right_column">
            <!-- filler so prior column don't float -->
          </td>
        </tr>
      </tbody>
    </table>
</div>
<hr/>
<section class="container footer">
    <div class="row">
        <div class="col-sm-3">
            <a href="../../online-backup-about.html">About Us</a> | <a href="../../partners.html">Partners</a>
        </div>

        <div class="col-sm-9">
            Resources: <a href="../../edrive.html">External Drives</a> | <a href="../../hard-drive.html">Hard Drive Stats</a> | <a
                href="../../data-backup/backup-your-computer.html">Backup Guide</a><br>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            Backblaze &copy;. <a href="../../privacy.html" style="color:#999999; text-decoration:underline;">Terms &amp;
            Privacy </a>
        </div>
    </div>

</section>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2694151-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
