<!DOCTYPE html>
<html lang="en">
<head>
    <!-- DO NOT EDIT THIS FILE.  It is generated.  See README. -->
    <meta charset="utf-8" />
    <!-- meta name="viewport" content="width=device-width, initial-scale=1" -->
    <title>File Versions</title> 
    <!-- font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css' />
    <!-- jquery -->
    <script language="JavaScript" src="../../scripts/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/jquery.cookie.js" type="text/javascript"></script>
    <!-- bootstrap -->
    <link href="../css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/bootstrap.min.js" type="text/javascript"></script>
    <!-- backblaze -->
    <link href="../css/b2_nav.css" rel="stylesheet" type="text/css"/>    
    <link href="../css/b2_footer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/b2_main.css" rel="stylesheet" type="text/css"/> 
    <link href="../css/b2-cloud-storage-docs.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/b2-cloud-storage-docs.js" type="text/javascript"></script>
    <script language="JavaScript" src="../js/nav.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/main.js" type="text/javascript"></script>
    <!- highlight.js -->
    <link id="highLightLink" href="../css/highlight/xcode.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" type="text/javascript" src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    
<div class="header clearfix">
    <nav class="navbar navbar-default navbar-fixed-top" style="background-color:#fff;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header b2_docs_nav_bar_hdr">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <div id="nav-icon3">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <a class="navbar-brand" href="/index.html">
                    <img src="https://www.backblaze.com/pics/backblaze-logo.gif"
                         width="180" height="31" alt="Backblaze" style="float:left;"></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="../../cloud-backup.html">Personal Backup</a></li>
                    <li><a href="../../business.html">Business Backup</a></li>
                    <li class="active"><a href="../index.html">B2 Cloud Storage</a></li>
                    <li><a href="../../blog/">Blog</a></li>
                    <li><a href="../../help.html">Help</a></li>
                    <li><a href="../../user_signin.htm">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="b2-docs-subnav-bar">
        <div id="bzSubNav">
            <div class="sub-wrapper container">
            <a id="sub-nav-toggle"><img class="nav-caret" src="../../pics/nav-caret-down.png"></a>
            <ul id="sub-nav-items">
                <li><a href="../cloud-storage.html" id="howItWorks"><span>How B2 Works</span></a>
                </li>
                <li><a href="../cloud-storage-providers.html" id="comparison"><span>Comparison</span></a></li>
                <li><a href="../why-b2.html" id="whyB2"><span>Why B2</span></a></li>
                <li><a href="../b2-use-cases.html" id="bzUseCases"><span>Use Cases</span></a></li>
                <li><a href="index.html" id="bzDoc" class="sub-nav-current"><span>Documentation</span></a></li>
            </ul>
            <div class="nav-button-wrapper">
                <a href="../cloud-storage-pricing.html" class="btn btn-default" role="button">Pricing</a>
                <a href="../get-invite.html" class="btn btn-primary" role="button">Get Invite</a>
            </div>
        </div>


</div>
    </div>

    <table class="doc_container">
        <tbody>
        <tr>
            <td class="left_column">
                <div class="left_nav">
                    <p class="left_nav_header">B2 Storage</p>
                    <p class="left_nav_item" id="index"><a href="index.html">Overview</a></p>
                    <p class="left_nav_item" id="buckets"><a href="buckets.html">Buckets</a></p>
                    <p class="left_nav_item" id="files"><a href="files.html">Files</a></p>
                    <p class="left_nav_item" id="file_versions"><a href="file_versions.html">File Versions</a></p>
                    <p class="left_nav_item" id="calling"><a href="calling.html">Calling the API</a></p>
                    <p class="left_nav_item" id="string_encoding"><a href="string_encoding.html">String Encoding</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Quick Start</p>
                    <p class="left_nav_item" id="quick_account"><a href="quick_account.html">Get An Account</a></p>
                    <p class="left_nav_item" id="quick_command_line"><a href="quick_command_line.html">Command-Line Tool</a></p>
                    <p class="left_nav_item" id="quick_bucket"><a href="quick_bucket.html">Make a Bucket</a></p>
                    <p class="left_nav_item" id="quick_upload"><a href="quick_upload.html">Upload a File</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">API Operations</p>
                    <p class="left_nav_item" id="b2_authorize_account"><a href="b2_authorize_account.html">b2_authorize_account</a></p>
                    <p class="left_nav_item" id="b2_create_bucket"><a href="b2_create_bucket.html">b2_create_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_bucket"><a href="b2_delete_bucket.html">b2_delete_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_file_version"><a href="b2_delete_file_version.html">b2_delete_file_version</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_id"><a href="b2_download_file_by_id.html">b2_download_file_by_id</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_name"><a href="b2_download_file_by_name.html">b2_download_file_by_name</a></p>
                    <p class="left_nav_item" id="b2_get_file_info"><a href="b2_get_file_info.html">b2_get_file_info</a></p>
                    <p class="left_nav_item" id="b2_get_upload_url"><a href="b2_get_upload_url.html">b2_get_upload_url</a></p>
                    <p class="left_nav_item" id="b2_hide_file"><a href="b2_hide_file.html">b2_hide_file</a></p>
                    <p class="left_nav_item" id="b2_list_buckets"><a href="b2_list_buckets.html">b2_list_buckets</a></p>
                    <p class="left_nav_item" id="b2_list_file_names"><a href="b2_list_file_names.html">b2_list_file_names</a></p>
                    <p class="left_nav_item" id="b2_list_file_versions"><a href="b2_list_file_versions.html">b2_list_file_versions</a></p>
                    <p class="left_nav_item" id="b2_update_bucket"><a href="b2_update_bucket.html">b2_update_bucket</a></p>
                    <p class="left_nav_item" id="b2_upload_file"><a href="b2_upload_file.html">b2_upload_file</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Source Code Bundles</p>
                    <p class="left_nav_item" id="b2-python-pusher"><a href="b2-python-pusher.html">B2 Python Pusher</a></p>
                    <p class="left_nav_item" id="playground"><a href="playground.html">Swift Playground</a></p>
                </div>
            </td>
            <td class="middle_column">

    
<h1 class="api_call">File Versions</h1>

<p class="doc_intro">
    To keep your data safe, even if you upload a bad file or get rid of the
    wrong file, B2 Cloud Storage lets you keep a history of previous versions
    of each file stored.  Not only can you keep previous versions of a file,
    but B2 can keep track of when a file has gone away and when it has
    been put back, allowing you to keep a full history.
</p>

<p>
    The first time you upload a file called <code>puppy.jpg</code>, you
    have just one version of the file, so it's clear which one you get
    when you download <code>puppy.jpg</code>.
</p>

<p>
    You can think of a file as always having a list of versions, newest first.
    When you download a file by name, you always get the most recent version,
    the first one in the list.  If you want an older version, you can
    find its File ID, and then download it.
</p>

<p>
    If you upload a new file called puppy.jpg, you get this:
</p>

<p>
  <img class="display" src="images/file_versions_one_version.png" alt="File with one version"/>
</p>

<p>
    If you upload another file with the same name later, there are now two
    versions in the list, with the newest one first:
</p>

<p>
  <img class="display" src="images/file_versions_two_versions.png" alt="File with two versions"/>
</p>

<p>
    At this point, if you download “puppy.jpg”, you’ll get the new one.
    You can still download either puppy image by using its file ID.
</p>

<p>
    The <code>b2_list_file_names</code> operation returns one entry for each
    file name, so at this point it will return just one file name, and it
    will have the file ID of the more recent version.  If you want to see
    all of the versions of the file, you can use
    the <code>b2_list_file_versions</code> operation, which will list both
    versions of “puppy.jpg”
</p>

<p>
  Now, the <code>b2_hide_file</code> operation makes it look like the file
  has been deleted, without removing any of the history.  It adds a new
  version of the file that is a marker saying the file is no longer there.
</p>

<p>
  <img class="display" src="images/file_versions_two_versions_one_deleted.png"
  alt="File with two versions, one deleted"/>
</p>

<p>
  With the file hidden, downloading the file by name will return a 404 error
  saying that the file is not there.
</p>

<p>
  Uploading yet another cute puppy picture at this point adds a new
  version, which is the one that you get when downloading the file by
  name.  The fact that it was hidden is still in the history.
</p>

<p>
  <img class="display" src="images/file_versions_three_versions.png" alt="File with three versions"/>
</p>

<p>
  The <code>b2_list_file_versions</code> operation will give you all of this
  information.  The results returned look like this:
</p>

<pre class="code">{
    "files" : [
        {
            "fileId": "4_z4a48fe8875c6214145260818_f0000000000823564_d20150725_m091433_c001_v0000123_t0104",
            "fileName": "puppy.jpg",
            "hidden": false,
            "uploadTimestamp": 1437815673000,
        },
        {
            "fileId": "4_z4a48fe8875c6214145260818_f0000000057265835_d20150723_m160005_c001_v0000123_t0104",,
            "fileName": "puppy.jpg",
            "hidden": true,
            "uploadTimestamp": 1437667205000,
        },
        {
            "fileId": "4_z4a48fe8875c6214145260818_f0000000000562156_d20150721_m045924_c001_v0000123_t0104",
            "fileName": "puppy.jpg",
            "hidden": false,
            "uploadTimestamp": 1437454764000,
        },
        {
            "fileId": "4_z4a48fe8875c6214145260818_f000000000000472a_d20150721_m032942_c001_v0000123_t0104",
            "fileName": "puppy.jpg",
            "hidden": false,
            "uploadTimestamp": 1437449382000,
        }
    ]
}
</pre>

<p>
  And finally, the last thing about file versions is that you can delete
  them.  Deleting a file version cannot be undone, and is permanent.
  The <code>b2_delete_file_version</code> operation makes it as if that version
  of the file had never been there.  You'll usually use this to clean up
  old versions of a file that you don't need any more.  Removing the first
  puppy uploaded results in this:
</p>

<p>
  <img class="display" src="images/file_versions_first_version_deleted.png" alt="first version is now gone"/>
</p>

<p>
  It is even possible to delete the marker saying a file is hidden.  If, at this
  point, you delete the newest version and the deletion marker, you get back
  to just one version:
</p>

<p>
  <img class="display" src="images/file_versions_back_to_one_version.png" alt="now there is just one version"/>
</p>


<p>
  To summarize, the things you can do to files are:
</p>

<table class="info">
  <tbody>
    <tr>
      <td><a href="b2_upload_file.html"><code>b2_upload_file</code></a></td>
      <td>
        Creates a new file version.  As the newest version, this is the one
        that you will get when downloading by name.
      </td>
    </tr>
    
    <tr>
      <td><a href="b2_download_file_by_id.html"><code>b2_download_file_by_id</code></a></td>
      <td>
        Fetches the specific file version for the given File ID.
      </td>
    </tr>
    
    <tr>
      <td><a href="b2_download_file_by_name.html"><code>b2_download_file_by_name</code></a></td>
      <td>
        Fetches the most recent version of the file.  If the file is not
        there at all, or the most recent version is "hidden",  returns 404.
      </td>
    </tr>

    <tr>
      <td><a href="b2_hide_file.html"><code>b2_hide_file_name</code></a></td>
      <td>
        Creates a "hidden" marker as the most recent version of the file.
        Downloading the file by name will return 404.
      </td>
    </tr>
    
    <tr>
      <td><a href="b2_delete_file_version.html"><code>b2_delete_file_version</code></a></td>
      <td>
        Permanently deletes the file version, and all of its data.  It will
        be as if that version had never been uploaded.
      </td>
    </tr>
    
    <tr>
      <td><a href="b2_list_file_names.html"><code>b2_list_file_names</code></a></td>
      <td>
        Returns file names for the bucket, in alphabetical order, starting at a given point.
      </td>
    </tr>
    
    <tr>
      <td><a href="b2_list_file_versions.html"><code>b2_list_file_versions</code></a></td>
      <td>
        Returns a list of all versions of all files in a bucket,
        sorted by file name, then by upload time.  May be restricted to
        just list the version for a given file name.
      </td>
    </tr>
  </tbody>
</table>



    

          </td>
          <td class="right_column">
            <!-- filler so prior column don't float -->
          </td>
        </tr>
      </tbody>
    </table>
</div>
<hr/>
<section class="container footer">
    <div class="row">
        <div class="col-sm-3">
            <a href="../../online-backup-about.html">About Us</a> | <a href="../../partners.html">Partners</a>
        </div>

        <div class="col-sm-9">
            Resources: <a href="../../edrive.html">External Drives</a> | <a href="../../hard-drive.html">Hard Drive Stats</a> | <a
                href="../../data-backup/backup-your-computer.html">Backup Guide</a><br>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            Backblaze &copy;. <a href="../../privacy.html" style="color:#999999; text-decoration:underline;">Terms &amp;
            Privacy </a>
        </div>
    </div>

</section>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2694151-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
