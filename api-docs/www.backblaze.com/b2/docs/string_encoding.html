<!DOCTYPE html>
<html lang="en">
<head>
    <!-- DO NOT EDIT THIS FILE.  It is generated.  See README. -->
    <meta charset="utf-8" />
    <!-- meta name="viewport" content="width=device-width, initial-scale=1" -->
    <title>Encoding Strings</title> 
    <!-- font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css' />
    <!-- jquery -->
    <script language="JavaScript" src="../../scripts/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/jquery.cookie.js" type="text/javascript"></script>
    <!-- bootstrap -->
    <link href="../css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/bootstrap.min.js" type="text/javascript"></script>
    <!-- backblaze -->
    <link href="../css/b2_nav.css" rel="stylesheet" type="text/css"/>    
    <link href="../css/b2_footer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/b2_main.css" rel="stylesheet" type="text/css"/> 
    <link href="../css/b2-cloud-storage-docs.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/b2-cloud-storage-docs.js" type="text/javascript"></script>
    <script language="JavaScript" src="../js/nav.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/main.js" type="text/javascript"></script>
    <!- highlight.js -->
    <link id="highLightLink" href="../css/highlight/xcode.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" type="text/javascript" src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    
<div class="header clearfix">
    <nav class="navbar navbar-default navbar-fixed-top" style="background-color:#fff;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header b2_docs_nav_bar_hdr">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <div id="nav-icon3">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <a class="navbar-brand" href="/index.html">
                    <img src="https://www.backblaze.com/pics/backblaze-logo.gif"
                         width="180" height="31" alt="Backblaze" style="float:left;"></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="../../cloud-backup.html">Personal Backup</a></li>
                    <li><a href="../../business.html">Business Backup</a></li>
                    <li class="active"><a href="../index.html">B2 Cloud Storage</a></li>
                    <li><a href="../../blog/">Blog</a></li>
                    <li><a href="../../help.html">Help</a></li>
                    <li><a href="../../user_signin.htm">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="b2-docs-subnav-bar">
        <div id="bzSubNav">
            <div class="sub-wrapper container">
            <a id="sub-nav-toggle"><img class="nav-caret" src="../../pics/nav-caret-down.png"></a>
            <ul id="sub-nav-items">
                <li><a href="../cloud-storage.html" id="howItWorks"><span>How B2 Works</span></a>
                </li>
                <li><a href="../cloud-storage-providers.html" id="comparison"><span>Comparison</span></a></li>
                <li><a href="../why-b2.html" id="whyB2"><span>Why B2</span></a></li>
                <li><a href="../b2-use-cases.html" id="bzUseCases"><span>Use Cases</span></a></li>
                <li><a href="index.html" id="bzDoc" class="sub-nav-current"><span>Documentation</span></a></li>
            </ul>
            <div class="nav-button-wrapper">
                <a href="../cloud-storage-pricing.html" class="btn btn-default" role="button">Pricing</a>
                <a href="../get-invite.html" class="btn btn-primary" role="button">Get Invite</a>
            </div>
        </div>


</div>
    </div>

    <table class="doc_container">
        <tbody>
        <tr>
            <td class="left_column">
                <div class="left_nav">
                    <p class="left_nav_header">B2 Storage</p>
                    <p class="left_nav_item" id="index"><a href="index.html">Overview</a></p>
                    <p class="left_nav_item" id="buckets"><a href="buckets.html">Buckets</a></p>
                    <p class="left_nav_item" id="files"><a href="files.html">Files</a></p>
                    <p class="left_nav_item" id="file_versions"><a href="file_versions.html">File Versions</a></p>
                    <p class="left_nav_item" id="calling"><a href="calling.html">Calling the API</a></p>
                    <p class="left_nav_item" id="string_encoding"><a href="string_encoding.html">String Encoding</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Quick Start</p>
                    <p class="left_nav_item" id="quick_account"><a href="quick_account.html">Get An Account</a></p>
                    <p class="left_nav_item" id="quick_command_line"><a href="quick_command_line.html">Command-Line Tool</a></p>
                    <p class="left_nav_item" id="quick_bucket"><a href="quick_bucket.html">Make a Bucket</a></p>
                    <p class="left_nav_item" id="quick_upload"><a href="quick_upload.html">Upload a File</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">API Operations</p>
                    <p class="left_nav_item" id="b2_authorize_account"><a href="b2_authorize_account.html">b2_authorize_account</a></p>
                    <p class="left_nav_item" id="b2_create_bucket"><a href="b2_create_bucket.html">b2_create_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_bucket"><a href="b2_delete_bucket.html">b2_delete_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_file_version"><a href="b2_delete_file_version.html">b2_delete_file_version</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_id"><a href="b2_download_file_by_id.html">b2_download_file_by_id</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_name"><a href="b2_download_file_by_name.html">b2_download_file_by_name</a></p>
                    <p class="left_nav_item" id="b2_get_file_info"><a href="b2_get_file_info.html">b2_get_file_info</a></p>
                    <p class="left_nav_item" id="b2_get_upload_url"><a href="b2_get_upload_url.html">b2_get_upload_url</a></p>
                    <p class="left_nav_item" id="b2_hide_file"><a href="b2_hide_file.html">b2_hide_file</a></p>
                    <p class="left_nav_item" id="b2_list_buckets"><a href="b2_list_buckets.html">b2_list_buckets</a></p>
                    <p class="left_nav_item" id="b2_list_file_names"><a href="b2_list_file_names.html">b2_list_file_names</a></p>
                    <p class="left_nav_item" id="b2_list_file_versions"><a href="b2_list_file_versions.html">b2_list_file_versions</a></p>
                    <p class="left_nav_item" id="b2_update_bucket"><a href="b2_update_bucket.html">b2_update_bucket</a></p>
                    <p class="left_nav_item" id="b2_upload_file"><a href="b2_upload_file.html">b2_upload_file</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Source Code Bundles</p>
                    <p class="left_nav_item" id="b2-python-pusher"><a href="b2-python-pusher.html">B2 Python Pusher</a></p>
                    <p class="left_nav_item" id="playground"><a href="playground.html">Swift Playground</a></p>
                </div>
            </td>
            <td class="middle_column">

    
<h1>Encoding Strings</h1>

<p class="doc_intro">
    Strings are passed into and out of the B2 APIs in four places:
    in JSON objects, in HTTP headers, in the URL path, and in the
    URL query string.  This page covers how unicode characters are
    encoded.
</p>

<h2>JSON</h2>

<p>
    Most of the API calls in B2 pass a request in JSON, and return results
    in JSON.  For these calls, strings are represented in UTF-8, with
    "interesting" characters encoded in the the normal JSON way.  Most
    characters can just be included directly in the strings, with the normal
    escaping for newlines, quotes, and such.
</p>

<p>
    If you prefer, any character can be represented using backslash-u syntax
    with the UTF-16 value of the character.  These two JSON strings are
    equivalent:
</p>

<pre class="code">"自由.txt"
"\u81ea\u7531.txt"
</pre>

<p>
    Note that backslash-u syntax in JSON is in UTF-16, so for code points
    above <code>0xffff</code>, you will need to use the high and low surrogates
    for the character.  For example, the code point <code>0x10400</code> is the
    character <small>DESERET CAPITAL LETTER LONG I</small>, and is written
    like this in JSON: <code>"\ud801\udc00"</code>.
    See <a href="https://en.wikipedia.org/wiki/UTF-16">Wikipia's UTF-16 article</a> for more information.
</p>

<p>
    In values returned from B2, the UTF-8 will be included directly
    in the string wherever allowed.  The only time backslash-u syntax
    is generated by B2 is for characters with code points below <code>\u0020</code>.
</p>

<p>
    The JSON library for the
    language you are using probably already does the right thing, and you
    shouldn't have to worry about any of this.
</p>

<h2>URL Encoding</h2>

<p>
    URL Encoding replaces "non-safe" bytes in a UTF-8 string with
    the "percent encoding" of hex values for those bytes.  This encoding
    is used for values in HTTP headers, in the URL path, and in the
    URL query string.
</p>

<p>
    For B2, all strings in HTTP headers must be URL-encoded.  Some values,
    such as Content-Type, are always composed of safe characters.  Other
    values, such as file names, can contain arbitrary Unicode, and require
    encoding.  We recommend that you make a habit of URL-encoding all header
    values passed to B2, and decoding all header values returned from B2.
</p>

<p>
    When downloading a file by name, the file name must be URL-encoded before
    appending it to the download URL.  And when using a query string instead
    of passing a JSON request, the parameters must all be URL-encoded.
</p>

<p>
    The characters that do not need percent-encoding are a subset
    of the printable ASCII characters: upper-case letters, lower-case letters,
    digits, ".", "_", "-", "/", "~", "!", "$", "'", "(", ")", "*", ";", "=",
    ":", and "@".  All other byte values in a UTF-8
    must be replaced with "%" and the two-digit hex value of the
    byte.
</p>

<p>
    This list of safe characters is safe in HTTP headers, in URL paths, and
    in URL query strings.  Some characters, such as "&" are safe in some
    contexts and not others.  For consistency, B2 requires %-encoding
    them all the time.  You may %-encode all characters if you prefer.
</p>

<p>
    For example, the string "hello world" is encoded as "hello%20world",
    and the string "日本語" is encoded as <code>"%E6%97%A5%E6%9C%AC%E8%AA%9E"</code>.
</p>

<p>
    The "+" character is a special case that is used to encode spaces.  A space
    character can be encoded as either "+" or "%20".  The plus sign must be
    percent-encoded as "%2B".
</p>

<h3>Test Cases</h3>

<p>
    If you're not sure whether your URL encoder does the right thing,
    you can use these test cases (in JSON) to check.  Your encoder should
    produce either the fullyEncoded or the minimallyEncode string,
    and shoud be able to decode either one.
</p>

<pre class="code">[
  {"fullyEncoded": "%20", "minimallyEncoded": "+", "string": " "},
  {"fullyEncoded": "%21", "minimallyEncoded": "!", "string": "!"},
  {"fullyEncoded": "%22", "minimallyEncoded": "%22", "string": "\""},
  {"fullyEncoded": "%23", "minimallyEncoded": "%23", "string": "#"},
  {"fullyEncoded": "%24", "minimallyEncoded": "$", "string": "$"},
  {"fullyEncoded": "%25", "minimallyEncoded": "%25", "string": "%"},
  {"fullyEncoded": "%26", "minimallyEncoded": "%26", "string": "&"},
  {"fullyEncoded": "%27", "minimallyEncoded": "'", "string": "'"},
  {"fullyEncoded": "%28", "minimallyEncoded": "(", "string": "("},
  {"fullyEncoded": "%29", "minimallyEncoded": ")", "string": ")"},
  {"fullyEncoded": "%2A", "minimallyEncoded": "*", "string": "*"},
  {"fullyEncoded": "%2B", "minimallyEncoded": "%2B", "string": "+"},
  {"fullyEncoded": "%2C", "minimallyEncoded": "%2C", "string": ","},
  {"fullyEncoded": "%2D", "minimallyEncoded": "-", "string": "-"},
  {"fullyEncoded": "%2E", "minimallyEncoded": ".", "string": "."},
  {"fullyEncoded": "%2F", "minimallyEncoded": "/", "string": "/"},
  {"fullyEncoded": "%30", "minimallyEncoded": "0", "string": "0"},
  {"fullyEncoded": "%31", "minimallyEncoded": "1", "string": "1"},
  {"fullyEncoded": "%32", "minimallyEncoded": "2", "string": "2"},
  {"fullyEncoded": "%33", "minimallyEncoded": "3", "string": "3"},
  {"fullyEncoded": "%34", "minimallyEncoded": "4", "string": "4"},
  {"fullyEncoded": "%35", "minimallyEncoded": "5", "string": "5"},
  {"fullyEncoded": "%36", "minimallyEncoded": "6", "string": "6"},
  {"fullyEncoded": "%37", "minimallyEncoded": "7", "string": "7"},
  {"fullyEncoded": "%38", "minimallyEncoded": "8", "string": "8"},
  {"fullyEncoded": "%39", "minimallyEncoded": "9", "string": "9"},
  {"fullyEncoded": "%3A", "minimallyEncoded": ":", "string": ":"},
  {"fullyEncoded": "%3B", "minimallyEncoded": ";", "string": ";"},
  {"fullyEncoded": "%3C", "minimallyEncoded": "%3C", "string": "<"},
  {"fullyEncoded": "%3D", "minimallyEncoded": "=", "string": "="},
  {"fullyEncoded": "%3E", "minimallyEncoded": "%3E", "string": ">"},
  {"fullyEncoded": "%3F", "minimallyEncoded": "%3F", "string": "?"},
  {"fullyEncoded": "%40", "minimallyEncoded": "@", "string": "@"},
  {"fullyEncoded": "%41", "minimallyEncoded": "A", "string": "A"},
  {"fullyEncoded": "%42", "minimallyEncoded": "B", "string": "B"},
  {"fullyEncoded": "%43", "minimallyEncoded": "C", "string": "C"},
  {"fullyEncoded": "%44", "minimallyEncoded": "D", "string": "D"},
  {"fullyEncoded": "%45", "minimallyEncoded": "E", "string": "E"},
  {"fullyEncoded": "%46", "minimallyEncoded": "F", "string": "F"},
  {"fullyEncoded": "%47", "minimallyEncoded": "G", "string": "G"},
  {"fullyEncoded": "%48", "minimallyEncoded": "H", "string": "H"},
  {"fullyEncoded": "%49", "minimallyEncoded": "I", "string": "I"},
  {"fullyEncoded": "%4A", "minimallyEncoded": "J", "string": "J"},
  {"fullyEncoded": "%4B", "minimallyEncoded": "K", "string": "K"},
  {"fullyEncoded": "%4C", "minimallyEncoded": "L", "string": "L"},
  {"fullyEncoded": "%4D", "minimallyEncoded": "M", "string": "M"},
  {"fullyEncoded": "%4E", "minimallyEncoded": "N", "string": "N"},
  {"fullyEncoded": "%4F", "minimallyEncoded": "O", "string": "O"},
  {"fullyEncoded": "%50", "minimallyEncoded": "P", "string": "P"},
  {"fullyEncoded": "%51", "minimallyEncoded": "Q", "string": "Q"},
  {"fullyEncoded": "%52", "minimallyEncoded": "R", "string": "R"},
  {"fullyEncoded": "%53", "minimallyEncoded": "S", "string": "S"},
  {"fullyEncoded": "%54", "minimallyEncoded": "T", "string": "T"},
  {"fullyEncoded": "%55", "minimallyEncoded": "U", "string": "U"},
  {"fullyEncoded": "%56", "minimallyEncoded": "V", "string": "V"},
  {"fullyEncoded": "%57", "minimallyEncoded": "W", "string": "W"},
  {"fullyEncoded": "%58", "minimallyEncoded": "X", "string": "X"},
  {"fullyEncoded": "%59", "minimallyEncoded": "Y", "string": "Y"},
  {"fullyEncoded": "%5A", "minimallyEncoded": "Z", "string": "Z"},
  {"fullyEncoded": "%5B", "minimallyEncoded": "%5B", "string": "["},
  {"fullyEncoded": "%5C", "minimallyEncoded": "%5C", "string": "\\"},
  {"fullyEncoded": "%5D", "minimallyEncoded": "%5D", "string": "]"},
  {"fullyEncoded": "%5E", "minimallyEncoded": "%5E", "string": "^"},
  {"fullyEncoded": "%5F", "minimallyEncoded": "_", "string": "_"},
  {"fullyEncoded": "%60", "minimallyEncoded": "%60", "string": "`"},
  {"fullyEncoded": "%61", "minimallyEncoded": "a", "string": "a"},
  {"fullyEncoded": "%62", "minimallyEncoded": "b", "string": "b"},
  {"fullyEncoded": "%63", "minimallyEncoded": "c", "string": "c"},
  {"fullyEncoded": "%64", "minimallyEncoded": "d", "string": "d"},
  {"fullyEncoded": "%65", "minimallyEncoded": "e", "string": "e"},
  {"fullyEncoded": "%66", "minimallyEncoded": "f", "string": "f"},
  {"fullyEncoded": "%67", "minimallyEncoded": "g", "string": "g"},
  {"fullyEncoded": "%68", "minimallyEncoded": "h", "string": "h"},
  {"fullyEncoded": "%69", "minimallyEncoded": "i", "string": "i"},
  {"fullyEncoded": "%6A", "minimallyEncoded": "j", "string": "j"},
  {"fullyEncoded": "%6B", "minimallyEncoded": "k", "string": "k"},
  {"fullyEncoded": "%6C", "minimallyEncoded": "l", "string": "l"},
  {"fullyEncoded": "%6D", "minimallyEncoded": "m", "string": "m"},
  {"fullyEncoded": "%6E", "minimallyEncoded": "n", "string": "n"},
  {"fullyEncoded": "%6F", "minimallyEncoded": "o", "string": "o"},
  {"fullyEncoded": "%70", "minimallyEncoded": "p", "string": "p"},
  {"fullyEncoded": "%71", "minimallyEncoded": "q", "string": "q"},
  {"fullyEncoded": "%72", "minimallyEncoded": "r", "string": "r"},
  {"fullyEncoded": "%73", "minimallyEncoded": "s", "string": "s"},
  {"fullyEncoded": "%74", "minimallyEncoded": "t", "string": "t"},
  {"fullyEncoded": "%75", "minimallyEncoded": "u", "string": "u"},
  {"fullyEncoded": "%76", "minimallyEncoded": "v", "string": "v"},
  {"fullyEncoded": "%77", "minimallyEncoded": "w", "string": "w"},
  {"fullyEncoded": "%78", "minimallyEncoded": "x", "string": "x"},
  {"fullyEncoded": "%79", "minimallyEncoded": "y", "string": "y"},
  {"fullyEncoded": "%7A", "minimallyEncoded": "z", "string": "z"},
  {"fullyEncoded": "%7B", "minimallyEncoded": "%7B", "string": "{"},
  {"fullyEncoded": "%7C", "minimallyEncoded": "%7C", "string": "|"},
  {"fullyEncoded": "%7D", "minimallyEncoded": "%7D", "string": "}"},
  {"fullyEncoded": "%7E", "minimallyEncoded": "~", "string": "~"},
  {"fullyEncoded": "%7F", "minimallyEncoded": "%7F", "string": "\u007f"},
  {"fullyEncoded": "%E8%87%AA%E7%94%B1", "minimallyEncoded": "%E8%87%AA%E7%94%B1", "string": "\u81ea\u7531"},
  {"fullyEncoded": "%F0%90%90%80", "minimallyEncoded": "%F0%90%90%80", "string": "\ud801\udc00"}
]
</pre>



    
<!-- DO NOT EDIT - this section generated by build-doc.py -->

<h2>Sample Code</h2>
<nav id="example_bar"></nav>
<div id="example_source">
<div id="src_java" title="Java">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="java">
// Requirements: com.google.Gson
// NOTE: Remember to run the java with assertions on "-ea"

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.lang.reflect.Type;
import java.util.ArrayList;
import java.util.List;

public class B2 {
    public static String b2UrlEncode(String s) throws UnsupportedEncodingException {
        return java.net.URLEncoder.encode(s, "UTF-8");
    }

    public static String b2UrlDecode(String s) throws UnsupportedEncodingException {
        return java.net.URLDecoder.decode(s, "UTF-8");
    }

    public static void runTestCases() {
        Gson gson = new Gson();
        FileReader stringEncodingTestCases = null;
        try {
            stringEncodingTestCases = new FileReader("/tmp/cases.json");
            Type listType = new TypeToken&lt;ArrayList&lt;TestCase&gt;&gt;() {}.getType();
            List&lt;TestCase&gt; testCases = gson.fromJson(stringEncodingTestCases, listType);
            for (TestCase aTestCase : testCases) {
                assert aTestCase.string.equals(b2UrlDecode(aTestCase.fullyEncoded));
                assert aTestCase.string.equals(b2UrlDecode(aTestCase.minimallyEncoded));
                String encoded = b2UrlEncode(aTestCase.string);
                assert encoded.equals(aTestCase.fullyEncoded) || encoded.equals(aTestCase.minimallyEncoded);
            }
        } catch (FileNotFoundException fnfx) {
            fnfx.printStackTrace();
        } catch (UnsupportedEncodingException uex) {
            uex.printStackTrace();
        } finally {
            try {
                stringEncodingTestCases.close();
            } catch (IOException iox) {
                iox.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        runTestCases();
    }

    public static class TestCase {
        public String fullyEncoded;
        public String minimallyEncoded;
        public String string;
    }
}
</code></pre>
</div>
<div id="src_python" title="Python">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="python">import urllib
import unittest
import json

def b2_url_encode(s):
    """URL-encodes a unicode string to be sent to B2 in an HTTP header.
    """
    return urllib.quote(s.encode('utf-8'))

def b2_url_decode(s):
    """Decodes a Unicode string returned from B2 in an HTTP header.

    Returns a Python unicode string.
    """
    # Use str() to make sure that the input to unquote is a str, not
    # unicode, which ensures that the result is a str, which allows
    # the decoding to work properly.
    return urllib.unquote_plus(str(s)).decode('utf-8')

class TestEncodeDecode(unittest.TestCase):
    # This assumes that the test cases are in a file called "cases.json".
    def test_encode_decode(self):
        for item in json.load(open('cases.json')):
            self.assertEquals(item['string'], b2_url_decode(item['fullyEncoded']))
            self.assertEquals(item['string'], b2_url_decode(item['minimallyEncoded']))
            self.assertIn(b2_url_encode(item['string']), [item['fullyEncoded'], item['minimallyEncoded']])

if __name__ == '__main__':
    unittest.main()
</code></pre>
</div>
<div id="src_swift" title="Swift">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="swift">import Foundation

extension String {
    func b2UrlEncode() -&gt; String? {
        let b2CharacterSet = NSMutableCharacterSet()
        b2CharacterSet.formUnionWithCharacterSet(NSCharacterSet.URLPathAllowedCharacterSet())
        b2CharacterSet.removeCharactersInString("&amp;+,")
        return stringByAddingPercentEncodingWithAllowedCharacters(b2CharacterSet)
    }
    func b2UrlDecode() -&gt; String? {
        if (self == "+") {
            return " "
        }
        return stringByRemovingPercentEncoding
    }
}

// Run a test
let pathToEncodeJson = NSBundle.mainBundle().pathForResource("encoding", ofType: "json")
let jsonTestCaseData = NSData(contentsOfFile: pathToEncodeJson!)
do {
    var encodingTestCases = try NSJSONSerialization.JSONObjectWithData(jsonTestCaseData!, options: .MutableContainers)
    if let encodingTestCases = encodingTestCases as? Array&lt;Dictionary&lt;String,String&gt;&gt; {
        for anEncodingTestCase in encodingTestCases {
            assert(anEncodingTestCase["string"]! == anEncodingTestCase["minimallyEncoded"]!.b2UrlDecode()!)
            assert(anEncodingTestCase["string"]! == anEncodingTestCase["fullyEncoded"]!.b2UrlDecode()!)
            assert(anEncodingTestCase["string"]!.b2UrlEncode()! == (anEncodingTestCase["fullyEncoded"]!)
                || anEncodingTestCase["string"]!.b2UrlEncode()! == (anEncodingTestCase["minimallyEncoded"]!), "Failed decoding test.")
        }
    }
} catch let error as NSError {
    print("\(error.domain)")
}</code></pre>
</div>
<div id="src_ruby" title="Ruby">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="ruby">require 'uri'
require 'test/unit'
require 'json'

module URI
    class B2
        def self.b2_url_encode(str)
            URI.encode_www_form_component(str.force_encoding(Encoding::UTF_8))
        end
        def self.b2_url_decode(str)
            URI.decode_www_form_component(str, Encoding::UTF_8)
        end
    end
end

class B2StringEncodingTest &lt; Test::Unit::TestCase
    def test_string_encoding()
        encodingTestCases = JSON.parse(File.read("/tmp/cases.json"))
        encodingTestCases.each do |oneTestCase|
            assert(oneTestCase["string"] == URI::B2.b2_url_decode(oneTestCase["fullyEncoded"]), "Failed decoding fully-encoded test.")
            assert(oneTestCase["string"] == URI::B2.b2_url_decode(oneTestCase["minimallyEncoded"]), "Failed decoding minimally-encoded test.")
            encoded = URI::B2.b2_url_encode(oneTestCase["string"])
            assert(oneTestCase["fullyEncoded"] == encoded || oneTestCase["minimallyEncoded"] == encoded, "Failed encoding test.")
        end
    end
end
</code></pre>
</div>
<div id="src_csharp" title="C#">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="csharp">using System;
using System.Text;
using System.Web.Script.Serialization;
using System.Collections.Generic;
using System.Diagnostics;

using System.Net;

namespace B2CustomExtension
{
    public static class B2StringExtension
    {
        static public string b2UrlEncode(this string str)
        {
            return Uri.EscapeDataString(str);
        }

        static public string b2UrlDecode(this string str)
        {
            if (str == "+")
            {
                return " ";
            }
            return Uri.UnescapeDataString(str);
        }
    }
}

namespace B2
{
    using B2CustomExtension;
    using System.IO;

    class TestCase
    {
        public string String { get; set; }
        public string FullyEncoded { get; set; }
        public string MinimallyEncoded { get; set; }
    }

    class TestStringEncoding
    {
        static void Main(string[] args)
        {
            string testCaseData = System.IO.File.ReadAllText("C:\\cases.json", System.Text.Encoding.UTF8);
            JavaScriptSerializer ser = new JavaScriptSerializer();
            var testCases = ser.Deserialize&lt;List&lt;TestCase&gt;&gt;(testCaseData);
            foreach (TestCase aTestCase in testCases)
            {
                Debug.Assert(aTestCase.FullyEncoded.b2UrlDecode() == aTestCase.String);
                Debug.Assert(aTestCase.MinimallyEncoded.b2UrlDecode() == aTestCase.String);
                Debug.Assert(aTestCase.String.b2UrlEncode() == aTestCase.FullyEncoded || aTestCase.String.b2UrlEncode() == aTestCase.MinimallyEncoded);
            }
        }
    }
}
</code></pre>
</div>
<div id="src_php" title="PHP">
<p class="doc_fancy_line  ">Code</p>
<p>under construction</p>
</div>
</div>
<div id="stylePickerDiv"></div>


          </td>
          <td class="right_column">
            <!-- filler so prior column don't float -->
          </td>
        </tr>
      </tbody>
    </table>
</div>
<hr/>
<section class="container footer">
    <div class="row">
        <div class="col-sm-3">
            <a href="../../online-backup-about.html">About Us</a> | <a href="../../partners.html">Partners</a>
        </div>

        <div class="col-sm-9">
            Resources: <a href="../../edrive.html">External Drives</a> | <a href="../../hard-drive.html">Hard Drive Stats</a> | <a
                href="../../data-backup/backup-your-computer.html">Backup Guide</a><br>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            Backblaze &copy;. <a href="../../privacy.html" style="color:#999999; text-decoration:underline;">Terms &amp;
            Privacy </a>
        </div>
    </div>

</section>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2694151-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
