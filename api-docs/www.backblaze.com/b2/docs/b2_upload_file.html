<!DOCTYPE html>
<html lang="en">
<head>
    <!-- DO NOT EDIT THIS FILE.  It is generated.  See README. -->
    <meta charset="utf-8" />
    <!-- meta name="viewport" content="width=device-width, initial-scale=1" -->
    <title>b2_upload_file</title> 
    <!-- font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css' />
    <!-- jquery -->
    <script language="JavaScript" src="../../scripts/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/jquery.cookie.js" type="text/javascript"></script>
    <!-- bootstrap -->
    <link href="../css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/bootstrap.min.js" type="text/javascript"></script>
    <!-- backblaze -->
    <link href="../css/b2_nav.css" rel="stylesheet" type="text/css"/>    
    <link href="../css/b2_footer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/b2_main.css" rel="stylesheet" type="text/css"/> 
    <link href="../css/b2-cloud-storage-docs.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" src="../js/b2-cloud-storage-docs.js" type="text/javascript"></script>
    <script language="JavaScript" src="../js/nav.js" type="text/javascript"></script>
    <script language="JavaScript" src="../../scripts/main.js" type="text/javascript"></script>
    <!- highlight.js -->
    <link id="highLightLink" href="../css/highlight/xcode.css" rel="stylesheet" type="text/css"/>
    <script language="JavaScript" type="text/javascript" src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    
<div class="header clearfix">
    <nav class="navbar navbar-default navbar-fixed-top" style="background-color:#fff;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header b2_docs_nav_bar_hdr">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <div id="nav-icon3">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <a class="navbar-brand" href="/index.html">
                    <img src="https://www.backblaze.com/pics/backblaze-logo.gif"
                         width="180" height="31" alt="Backblaze" style="float:left;"></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="../../cloud-backup.html">Personal Backup</a></li>
                    <li><a href="../../business.html">Business Backup</a></li>
                    <li class="active"><a href="../index.html">B2 Cloud Storage</a></li>
                    <li><a href="../../blog/">Blog</a></li>
                    <li><a href="../../help.html">Help</a></li>
                    <li><a href="../../user_signin.htm">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="b2-docs-subnav-bar">
        <div id="bzSubNav">
            <div class="sub-wrapper container">
            <a id="sub-nav-toggle"><img class="nav-caret" src="../../pics/nav-caret-down.png"></a>
            <ul id="sub-nav-items">
                <li><a href="../cloud-storage.html" id="howItWorks"><span>How B2 Works</span></a>
                </li>
                <li><a href="../cloud-storage-providers.html" id="comparison"><span>Comparison</span></a></li>
                <li><a href="../why-b2.html" id="whyB2"><span>Why B2</span></a></li>
                <li><a href="../b2-use-cases.html" id="bzUseCases"><span>Use Cases</span></a></li>
                <li><a href="index.html" id="bzDoc" class="sub-nav-current"><span>Documentation</span></a></li>
            </ul>
            <div class="nav-button-wrapper">
                <a href="../cloud-storage-pricing.html" class="btn btn-default" role="button">Pricing</a>
                <a href="../get-invite.html" class="btn btn-primary" role="button">Get Invite</a>
            </div>
        </div>


</div>
    </div>

    <table class="doc_container">
        <tbody>
        <tr>
            <td class="left_column">
                <div class="left_nav">
                    <p class="left_nav_header">B2 Storage</p>
                    <p class="left_nav_item" id="index"><a href="index.html">Overview</a></p>
                    <p class="left_nav_item" id="buckets"><a href="buckets.html">Buckets</a></p>
                    <p class="left_nav_item" id="files"><a href="files.html">Files</a></p>
                    <p class="left_nav_item" id="file_versions"><a href="file_versions.html">File Versions</a></p>
                    <p class="left_nav_item" id="calling"><a href="calling.html">Calling the API</a></p>
                    <p class="left_nav_item" id="string_encoding"><a href="string_encoding.html">String Encoding</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Quick Start</p>
                    <p class="left_nav_item" id="quick_account"><a href="quick_account.html">Get An Account</a></p>
                    <p class="left_nav_item" id="quick_command_line"><a href="quick_command_line.html">Command-Line Tool</a></p>
                    <p class="left_nav_item" id="quick_bucket"><a href="quick_bucket.html">Make a Bucket</a></p>
                    <p class="left_nav_item" id="quick_upload"><a href="quick_upload.html">Upload a File</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">API Operations</p>
                    <p class="left_nav_item" id="b2_authorize_account"><a href="b2_authorize_account.html">b2_authorize_account</a></p>
                    <p class="left_nav_item" id="b2_create_bucket"><a href="b2_create_bucket.html">b2_create_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_bucket"><a href="b2_delete_bucket.html">b2_delete_bucket</a></p>
                    <p class="left_nav_item" id="b2_delete_file_version"><a href="b2_delete_file_version.html">b2_delete_file_version</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_id"><a href="b2_download_file_by_id.html">b2_download_file_by_id</a></p>
                    <p class="left_nav_item" id="b2_download_file_by_name"><a href="b2_download_file_by_name.html">b2_download_file_by_name</a></p>
                    <p class="left_nav_item" id="b2_get_file_info"><a href="b2_get_file_info.html">b2_get_file_info</a></p>
                    <p class="left_nav_item" id="b2_get_upload_url"><a href="b2_get_upload_url.html">b2_get_upload_url</a></p>
                    <p class="left_nav_item" id="b2_hide_file"><a href="b2_hide_file.html">b2_hide_file</a></p>
                    <p class="left_nav_item" id="b2_list_buckets"><a href="b2_list_buckets.html">b2_list_buckets</a></p>
                    <p class="left_nav_item" id="b2_list_file_names"><a href="b2_list_file_names.html">b2_list_file_names</a></p>
                    <p class="left_nav_item" id="b2_list_file_versions"><a href="b2_list_file_versions.html">b2_list_file_versions</a></p>
                    <p class="left_nav_item" id="b2_update_bucket"><a href="b2_update_bucket.html">b2_update_bucket</a></p>
                    <p class="left_nav_item" id="b2_upload_file"><a href="b2_upload_file.html">b2_upload_file</a></p>
                    <p>&nbsp;</p>
                    <p class="left_nav_header">Source Code Bundles</p>
                    <p class="left_nav_item" id="b2-python-pusher"><a href="b2-python-pusher.html">B2 Python Pusher</a></p>
                    <p class="left_nav_item" id="playground"><a href="playground.html">Swift Playground</a></p>
                </div>
            </td>
            <td class="middle_column">

    
<h1>b2_upload_file</h1>

<p class="doc_intro">
    Uploads one file to B2, returning its unique file ID.
</p>

<h2>Request</h2>

<p>
    The upload request is a POST.  The file name and
    other parameters are in the request headers, and the file to be
    uploaded is the request body.
</p>

<h3>URL Path</h3>

<p>
    Use the <a href="b2_get_upload_url.html"><code>b2_get_upload_url</code></a> operation to get a URL you can use to
    upload files.  The URL it returns will contain your bucket ID and the
    upload destination, and will look something like this:
</p>

<pre class="code">https://pod-000-1007-13.backblaze.com/b2api/v1/b2_upload_file/4a48fe8875c6214145260818/c001_v0001007_t0042
</pre>

<h3>Request HTTP Headers</h3>


<div class="b2_params">
    <div class="param">
        <p class="param_name">Authorization</p>
        <p class="param_required">required</p>
        <p class="param_description">
            An upload authorization token, from <a href="b2_get_upload_url.html"><code>b2_get_upload_url</code></a>.
        </p>
    </div>
    <div class="param">
        <p class="param_name">X-Bz-File-Name</p>
        <p class="param_required">required</p>
        <p class="param_description">
            The name of the file, in percent-encoded UTF-8.
            See <a href="files.html">Files</a> for requirements
            on file names.
            See <a href="string_encoding.html">String Encoding</a>.
        </p>
    </div>
    <div class="param">
        <p class="param_name">Content-Type</p>
        <p class="param_required">required</p>
        <p class="param_description">
            The MIME type of the content of the file, which will
            be returned in the <code>Content-Type</code> header when downloading
            the file.  Use the Content-Type <code>b2/x-auto</code> to automatically
            set the stored Content-Type post upload. In the case where a file extension is absent or 
            the lookup fails, the Content-Type is set to <code>application/octet-stream</code>.  
            The Content-Type mappings can be purused <a href="content-types.html">here</a>. 
        </p>
    </div>
    <div class="param">
        <p class="param_name">X-Bz-Content-Sha1</p>
        <p class="param_required">required</p>
        <p class="param_description">
            The SHA1 checksum of the content of the file.  B2 will check this
            when the file is uploaded, to make sure that the file arrived
            correctly.  It will be returned in the <code>X-Bz-Content-Sha1</code>
            header when the file is downloaded.
        </p>
    </div>
	<div class="param">
        <p class="param_name">X-Bz-Info-src_last_modified_millis</p>
        <p class="param_required">optional</p>
        <p class="param_description">
            If the original source of the file being uploaded has a last modified 
			time concept, Backblaze recommends using this spelling of one of 
			your ten X-Bz-Info-* headers (see below). Using a standard 
			spelling allows different B2 clients and the B2 web user interface
            to interoperate correctly. The value should be a base 10 number 
			which represents a UTC time when the original source file 
			was last modified. It is a base 10 number of milliseconds since 
			midnight, January 1, 1970 UTC. This fits in a 64 bit integer such 
			as the type "long" in the programming language Java. It is intended 
			to be compatible with Java's time long. For example, it can be passed 
			directly into the Java call Date.setTime(long time).
        </p>
    </div>

    <div class="param">
        <p class="param_name">X-Bz-Info-*</p>
        <p class="param_required">optional</p>
        <p class="param_description">
            Up to 10 of these headers may be present.  The <code>*</code> part
            of the header name is replace with the name of a custom field in
            the file information stored with the file, and the value is an
            arbitrary UTF-8 string, <a href="string_encoding.html">percent-encoded</a>.
            The same info headers sent with the upload will be returned
            with the download.
        </p>
    </div>
</div>

<p>
    The following HTTP headers must not be included in the <code>b2_upload_file</code>
    request:
</p>

<ul>
    <li>Cache-Control</li>
    <li>Content-Disposition</li>
    <li>Content-Encoding</li>
    <li>Content-Language</li>
    <li>Content-Location</li>
    <li>Content-Language</li>
    <li>Content-Range</li>
    <li>Expires</li>
</ul>

<h3>Request HTTP Message Body Parameters</h3>

<p>
    There are no JSON parameters allowed.  The file to be
    uploaded is the message body and is not encoded in any way.  
	It is not URL encoded.  It is not MIME encoded.
</p>

<h3>Return Value</h3>

<p>
    On success, the HTTP return status is 200 and the file is inside B2.  Anything other than 200 is failure and the file will not be in B2. 
	On failure if possible the server will return the following JSON structure with more information about the error:<br>
	<pre>   { &quot;code&quot;: &quot;codeValue&quot;,<br>     &quot;message&quot;: &quot;messageValue&quot;,<br>     &quot;status&quot;: http_ret_status_int }</pre>
	where the messageValue is a human readable message.<br>
	<br>
	If the HTTP return status is anything other than 200, the caller must not upload to this URL again.  Instead the caller MUST call 
	<a href="b2_get_upload_url.html">b2_get_upload_url</a> to get a new uploadUrl and new authorizationToken.  The reason for this
	is that the individual storage pod you are uploading into may be full of data and thus will never accept any more data for now,
	or it has crashed, or has been placed into maintenance and will not accept data, etc.  No matter what the reason, you must use   
	<a href="b2_get_upload_url.html">b2_get_upload_url</a> to get a new uploadUrl and new authorizationToken in order to retry the
	upload.
</p>

<h2>Response</h2>

<!-- This same structure is in b2_get_file_info and b2_upload_file -->

<div class="b2_params">
    <div class="param">
        <p class="param_name">fileId</p>
        <p class="param_description">
            The unique identifier for this version of this file.
            Used with <a href="b2_get_file_info.html"><code>b2_get_file_info</code></a>,
            <a href="b2_download_file_by_id.html"><code>b2_download_file_by_id</code></a>,
            and <a href="b2_delete_file_version.html"><code>b2_delete_file_version</code></a>.
        </p>
    </div>
    <div class="param">
        <p class="param_name">fileName</p>
        <p class="param_description">
            The name of this file, which can be used with
            <a href="b2_download_file_by_name.html"><code>b2_download_file_by_name</code></a>.
        </p>
    </div>
    <div class="param">
        <p class="param_name">accountId</p>
        <p class="param_description">
            Your account ID.
        </p>
    </div>
    <div class="param">
        <p class="param_name">bucketId</p>
        <p class="param_description">
            The bucket that the file is in.
        </p>
    </div>
    <div class="param">
        <p class="param_name">contentLength</p>
        <p class="param_description">
            The number of bytes stored in the file.
        </p>
	</div>
    <div class="param">
        <p class="param_name">contentSha1</p>
        <p class="param_description">
            The SHA1 of the bytes stored in the file.
        </p>
    </div>
    <div class="param">
        <p class="param_name">contentType</p>
        <p class="param_description">
            The MIME type of the file.
        </p>
    </div>
    <div class="param">
        <p class="param_name">fileInfo</p>
        <p class="param_description">
            The custom information that was uploaded with the file.
            This is a JSON object, holding the name/value pairs
            that were uploaded with the file.
        </p>
    </div>
</div>



    
<!-- DO NOT EDIT - this section generated by build-doc.py -->

<h2>Sample Code</h2>
<nav id="example_bar"></nav>
<div id="example_source">
<div id="src_curl" title="cUrl">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="bash">FILE_TO_UPLOAD=typing_test.txt
MIME_TYPE=text/plain
SHA1_OF_FILE=$(openssl dgst -sha1 $FILE_TO_UPLOAD | awk '{print $2;}')
UPLOAD_URL=... # from b2_get_upload_url call
UPLOAD_AUTHORIZATION_TOKEN=... # from b2_get_upload_url call

curl \
    -H "Authorization: $UPLOAD_AUTHORIZATION_TOKEN" \
    -H "X-Bz-File-Name: $FILE_TO_UPLOAD" \
    -H "Content-Type: $MIME_TYPE" \
    -H "X-Bz-Content-Sha1: $SHA1_OF_FILE" \
    -H "X-Bz-Info-Author: unknown" \
    -d "@$FILE_TO_UPLOAD" \
    $UPLOAD_URL</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt",
    "accountId" : "d522aa47a10f",
    "bucketId" : "4a48fe8875c6214145260818",
    "contentLength" : 46,
    "contentSha1" : "bae5ed658ab3546aee12f23f36392f35dba1ebdd",
    "contentType" : "text/plain",
    "fileInfo" : {
       "author" : "unknown"
    }
}
</code></pre>
</div>
<div id="src_java" title="Java">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="java">String uploadUrl = ""; // Provided by b2_get_upload_url
String uploadAuthorizationToken = ""; // Provided by b2_get_upload_url
String fileName = ""; // The name of the file you are uploading
String contentType = ""; // The content type of the file
String sha1 = ""; // SHA1 of the file you are uploading
byte fileData[];
HttpURLConnection connection = null;
String json = null;
try {
    URL url = new URL(uploadUrl);
    connection = (HttpURLConnection)url.openConnection();
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Authorization", uploadAuthorizationToken);
    connection.setRequestProperty("Content-Type", contentType);
    connection.setRequestProperty("X-Bz-File-Name", fileName);
    connection.setRequestProperty("X-Bz-Content-Sha1", sha1);
    connection.setDoOutput(true);
    DataOutputStream writer = new DataOutputStream(connection.getOutputStream());
    writer.write(fileData);
    json = myInputStreamHandler(connection.getInputStream());
} catch (Exception e) {
    e.printStackTrace();
} finally {
    connection.disconnect();
}</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt",
    "accountId" : "d522aa47a10f",
    "bucketId" : "4a48fe8875c6214145260818",
    "contentLength" : 46,
    "contentSha1" : "bae5ed658ab3546aee12f23f36392f35dba1ebdd",
    "contentType" : "text/plain",
    "fileInfo" : {
       "author" : "unknown"
    }
}
</code></pre>
</div>
<div id="src_python" title="Python">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="python">import json
import urllib2
import hashlib

upload_url = "" # Provided by b2_get_upload_url
upload_authorization_token = "" # Provided by b2_get_upload_url
file_data = "Now, I am become Death, the destroyer of worlds."
file_name = "oppenheimer_says.txt"
content_type = "text/plain"
sha1_of_file_data = hashlib.sha1(file_data).hexdigest()

headers = {
    'Authorization' : upload_authorization_token,
    'X-Bz-File-Name' :  file_name,
    'Content-Type' : content_type,
    'X-Bz-Content-Sha1' : sha1_of_file_data
    }
request = urllib2.Request(upload_url, file_data, headers)

response = urllib2.urlopen(request)
response_data = json.loads(response.read())
response.close()
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt",
    "accountId" : "d522aa47a10f",
    "bucketId" : "4a48fe8875c6214145260818",
    "contentLength" : 46,
    "contentSha1" : "bae5ed658ab3546aee12f23f36392f35dba1ebdd",
    "contentType" : "text/plain",
    "fileInfo" : {
       "author" : "unknown"
    }
}
</code></pre>
</div>
<div id="src_swift" title="Swift">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="swift">import Foundation

let uploadUrl = "" // Provided by b2_get_upload_url
let uploadAuthorizationToken = "" // Provided by b2_get_upload_url
let fileName = "" // The name of the file you are uploading
let contentType = "" // The content type of the file
let sha1 = "" // SHA1 of the file you are uploading
if let fileData = NSData(contentsOfURL: "&lt;a_file_url&gt;") {
    let session = NSURLSession.sharedSession()
    let request = NSMutableURLRequest(URL: NURL(uploadUrl)!)
    request.HTTPMethod = "POST"
    request.addValue(uploadAuthorizationToken, forHTTPHeaderField: "Authorization")
    request.addValue(fileName, forHTTPHeaderField: "X-Bz-File-Name")
    request.addValue(contentType, forHTTPHeaderField: "Content-Type")
    request.addValue(sha1, forHTTPHeaderField: "X-Bz-Content-Sha1")
    let task = session.uploadTaskWithRequest(request, fromData: uploadData, completionHandler:{ (data: NSData!, response: NSURLResponse!, error: NSError!) -&gt; Void in
        if data != nil {
            requestData = data
        }
    })
    task.resume()
}
</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt",
    "accountId" : "d522aa47a10f",
    "bucketId" : "4a48fe8875c6214145260818",
    "contentLength" : 46,
    "contentSha1" : "bae5ed658ab3546aee12f23f36392f35dba1ebdd",
    "contentType" : "text/plain",
    "fileInfo" : {
       "author" : "unknown"
    }
}
</code></pre>
</div>
<div id="src_ruby" title="Ruby">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="ruby">require 'json'
require 'net/http'
require 'digest/sha1'

upload_url = "" # Provided by b2_get_upload_url
local_file = "" # File to be uploaded
upload_authorization_token = "" # Provided by b2_get_upload_url
file_name = "" # The name of the file you are uploading
content_type = ""  # The content type of the file
sha1 = "" # SHA1 of the file you are uploading
uri = URI.(upload_url)
req = Net::HTTP::Post.new(uri)
req.add_field("Authorization","#{upload_authorization_token}")
req.add_field("X-Bz-File-Name","#{file_name}")
req.add_field("Content-Type","#{content_type}")
req.add_field("X-Bz-Content-Sha1","#{sha1}")
req.add_field("Content-Length",File.size(local_file))
req.body = File.read(local_file)
http = Net::HTTP.new(req.uri.host, req.uri.port)
http.use_ssl = (req.uri.scheme == 'https')
res = http.start {|http| http.request(req)}
case res
when Net::HTTPSuccess then
    res.body
when Net::HTTPRedirection then
    fetch(res['location'], limit - 1)
else
    res.error!
end</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt",
    "accountId" : "d522aa47a10f",
    "bucketId" : "4a48fe8875c6214145260818",
    "contentLength" : 46,
    "contentSha1" : "bae5ed658ab3546aee12f23f36392f35dba1ebdd",
    "contentType" : "text/plain",
    "fileInfo" : {
       "author" : "unknown"
    }
}
</code></pre>
</div>
<div id="src_csharp" title="C#">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="csharp">String uploadAuthorizationToken = "UPLOAD_AUTHORIZATION_TOKEN"; //Provided by b2_get_upload_url
String contentType = "CONTENT_TYPE"; //Type of file i.e. image/jpeg, audio/mpeg...
String filePath = "FILE_PATH"; //File path of desired upload 
String fileName = "FILE_NAME"; //Desired name for the file
String sha1 = "SHA_1"; //Sha1 verification for the file
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uploadUrl);
webRequest.Method = "POST";
webRequest.Headers.Add("Authorization", uploadAuthorizationToken);
webRequest.Headers.Add("X-Bz-File-Name", fileName);
webRequest.Headers.Add("X-Bz-Content-Sha1", sha1);
webRequest.ContentType = contentType;
byte[] bytes = File.ReadAllBytes(filePath);
using (var stream = webRequest.GetRequestStream())
{
stream.Write(bytes, 0, bytes.Length);
stream.Close();
}
WebResponse response = (HttpWebResponse)webRequest.GetResponse();
var responseString = new StreamReader(response.GetResponseStream()).ReadToEnd();
response.Close();
Console.WriteLine(responseString);</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt",
    "accountId" : "d522aa47a10f",
    "bucketId" : "4a48fe8875c6214145260818",
    "contentLength" : 46,
    "contentSha1" : "bae5ed658ab3546aee12f23f36392f35dba1ebdd",
    "contentType" : "text/plain",
    "fileInfo" : {
       "author" : "unknown"
    }
}
</code></pre>
</div>
<div id="src_php" title="PHP">
<p class="doc_fancy_line  ">Code</p>
<pre class="code"><code class="php">$file_name = "file.txt";
$my_file = "&lt;path-to-file&gt;" . $file_name;
$handle = fopen($my_file, 'r');
$read_file = fread($handle,filesize($my_file));

$upload_url = ""; // Provided by b2_get_upload_url
$upload_auth_token = ""; // Provided by b2_get_upload_url
$bucket_id = "";  // The ID of the bucket
$content_type = "text/plain";
$sha1_of_file_data = sha1_file($my_file);

$session = curl_init($upload_url);

// Add read file as post field
curl_setopt($session, CURLOPT_POSTFIELDS, $read_file); 

// Add headers
$headers = array();
$headers[] = "Authorization: " . $upload_auth_token;
$headers[] = "X-Bz-File-Name: " . $file_name;
$headers[] = "Content-Type: " . $content_type;
$headers[] = "X-Bz-Content-Sha1: " . $sha1_of_file_data;
curl_setopt($session, CURLOPT_HTTPHEADER, $headers); 

curl_setopt($session, CURLOPT_POST, true); // HTTP POST
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);  // Receive server response
$server_output = curl_exec($session); // Let's do this!
curl_close ($session); // Clean up
echo ($server_output); // Tell me about the rabbits, George!</code></pre>
<p class="doc_fancy_line">Output</p>
<pre class="code"><code>{
    "fileId" : "4_h4a48fe8875c6214145260818_f000000000000472a_d20140104_m032022_c001_v0000123_t0104",
    "fileName" : "typing_test.txt",
    "accountId" : "d522aa47a10f",
    "bucketId" : "4a48fe8875c6214145260818",
    "contentLength" : 46,
    "contentSha1" : "bae5ed658ab3546aee12f23f36392f35dba1ebdd",
    "contentType" : "text/plain",
    "fileInfo" : {
       "author" : "unknown"
    }
}
</code></pre>
</div>
</div>
<div id="stylePickerDiv"></div>


          </td>
          <td class="right_column">
            <!-- filler so prior column don't float -->
          </td>
        </tr>
      </tbody>
    </table>
</div>
<hr/>
<section class="container footer">
    <div class="row">
        <div class="col-sm-3">
            <a href="../../online-backup-about.html">About Us</a> | <a href="../../partners.html">Partners</a>
        </div>

        <div class="col-sm-9">
            Resources: <a href="../../edrive.html">External Drives</a> | <a href="../../hard-drive.html">Hard Drive Stats</a> | <a
                href="../../data-backup/backup-your-computer.html">Backup Guide</a><br>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            Backblaze &copy;. <a href="../../privacy.html" style="color:#999999; text-decoration:underline;">Terms &amp;
            Privacy </a>
        </div>
    </div>

</section>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2694151-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
